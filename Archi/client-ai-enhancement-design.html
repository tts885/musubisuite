<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆç®¡ç†AIæ©Ÿèƒ½æ‹¡å¼µ è¨­è¨ˆæ›¸</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', 'Yu Gothic', 'Hiragino Sans', 'Meiryo', sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f5f5f5;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        header {
            border-bottom: 3px solid #2563eb;
            padding-bottom: 20px;
            margin-bottom: 40px;
        }
        
        h1 {
            font-size: 2.5em;
            color: #1e40af;
            margin-bottom: 10px;
        }
        
        .meta-info {
            color: #666;
            font-size: 0.9em;
        }
        
        h2 {
            font-size: 1.8em;
            color: #1e40af;
            margin-top: 40px;
            margin-bottom: 20px;
            border-left: 5px solid #2563eb;
            padding-left: 15px;
        }
        
        h3 {
            font-size: 1.4em;
            color: #2563eb;
            margin-top: 30px;
            margin-bottom: 15px;
        }
        
        h4 {
            font-size: 1.2em;
            color: #3b82f6;
            margin-top: 20px;
            margin-bottom: 10px;
        }
        
        p {
            margin-bottom: 15px;
        }
        
        ul, ol {
            margin-left: 30px;
            margin-bottom: 15px;
        }
        
        li {
            margin-bottom: 8px;
        }
        
        code {
            background: #f1f5f9;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.9em;
            color: #dc2626;
        }
        
        pre {
            background: #1e293b;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 5px;
            overflow-x: auto;
            margin-bottom: 20px;
        }
        
        pre code {
            background: none;
            color: #e2e8f0;
            padding: 0;
        }
        
        .table-container {
            overflow-x: auto;
            margin-bottom: 20px;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
            background: white;
        }
        
        th {
            background: #2563eb;
            color: white;
            padding: 12px;
            text-align: left;
            font-weight: 600;
        }
        
        td {
            padding: 12px;
            border: 1px solid #e5e7eb;
        }
        
        tr:nth-child(even) {
            background: #f9fafb;
        }
        
        .badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.85em;
            font-weight: 600;
        }
        
        .badge-new {
            background: #fef3c7;
            color: #92400e;
        }
        
        .badge-required {
            background: #fee2e2;
            color: #991b1b;
        }
        
        .badge-optional {
            background: #e0e7ff;
            color: #3730a3;
        }
        
        .badge-ai {
            background: #ddd6fe;
            color: #5b21b6;
        }
        
        .workflow-box {
            background: #f8fafc;
            border: 2px solid #cbd5e1;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .ui-mockup {
            background: #ffffff;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            font-family: monospace;
            white-space: pre;
            overflow-x: auto;
        }
        
        .section {
            margin-bottom: 40px;
        }
        
        .highlight {
            background: #fef3c7;
            padding: 15px;
            border-left: 4px solid #f59e0b;
            border-radius: 4px;
            margin: 20px 0;
        }
        
        .info-box {
            background: #eff6ff;
            padding: 15px;
            border-left: 4px solid #3b82f6;
            border-radius: 4px;
            margin: 20px 0;
        }
        
        .architecture-diagram {
            background: #f1f5f9;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            font-family: monospace;
        }
        
        .emoji {
            font-size: 1.2em;
            margin-right: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ“‹ ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆç®¡ç†AIæ©Ÿèƒ½æ‹¡å¼µ è¨­è¨ˆæ›¸</h1>
            <div class="meta-info">
                <p><strong>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ:</strong> MusubiSuite</p>
                <p><strong>ãƒãƒ¼ã‚¸ãƒ§ãƒ³:</strong> 1.0</p>
                <p><strong>ä½œæˆæ—¥:</strong> 2025å¹´11æœˆ15æ—¥</p>
                <p><strong>æœ€çµ‚æ›´æ–°:</strong> 2025å¹´11æœˆ15æ—¥</p>
            </div>
        </header>

        <!-- æ¦‚è¦ -->
        <section class="section">
            <h2><span class="emoji">ğŸ“–</span>æ¦‚è¦</h2>
            <p>æœ¬è¨­è¨ˆæ›¸ã¯ã€MusubiSuiteã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆç®¡ç†æ©Ÿèƒ½ã«AIè‡ªå‹•å…¥åŠ›æ©Ÿèƒ½ã‚’è¿½åŠ ã™ã‚‹ãŸã‚ã®æŠ€è¡“è¨­è¨ˆã‚’å®šç¾©ã—ã¾ã™ã€‚</p>
            
            <h3>ç›®çš„</h3>
            <ul>
                <li>ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆæƒ…å ±å…¥åŠ›ã®åŠ¹ç‡åŒ–</li>
                <li>Webä¸Šã®å…¬é–‹æƒ…å ±ã‚’æ´»ç”¨ã—ãŸè‡ªå‹•ãƒ‡ãƒ¼ã‚¿å–å¾—</li>
                <li>ãƒ‡ãƒ¼ã‚¿å…¥åŠ›ãƒŸã‚¹ã®å‰Šæ¸›</li>
                <li>å–¶æ¥­æ‹…å½“è€…ã®ä½œæ¥­è² æ‹…è»½æ¸›</li>
            </ul>

            <h3>ä¸»è¦æ©Ÿèƒ½</h3>
            <ol>
                <li>ä¼æ¥­åã‹ã‚‰AIã§è‡ªå‹•çš„ã«ä¼æ¥­æƒ…å ±ã‚’å–å¾—</li>
                <li>æ—¢å­˜ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆæƒ…å ±ã®æœ€æ–°åŒ–</li>
                <li>å¥‘ç´„æƒ…å ±ã®åˆ†é›¢ç®¡ç†ï¼ˆ1ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆï¼šè¤‡æ•°å¥‘ç´„ï¼‰</li>
                <li>AIè¨­å®šã®ç®¡ç†ç”»é¢</li>
            </ol>
        </section>

        <!-- ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«è¨­è¨ˆ -->
        <section class="section">
            <h2><span class="emoji">ğŸ—„ï¸</span>ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«è¨­è¨ˆ</h2>

            <h3>1. Clientãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆæ‹¡å¼µç‰ˆï¼‰</h3>
            <p>å¥‘ç´„æƒ…å ±ã‚’é™¤å¤–ã—ã€ä¼æ¥­ã®åŸºæœ¬æƒ…å ±ã®ã¿ã‚’ç®¡ç†ã—ã¾ã™ã€‚</p>

            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å</th>
                            <th>å‹</th>
                            <th>å¿…é ˆ</th>
                            <th>èª¬æ˜</th>
                            <th>AIå–å¾—</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td colspan="5" style="background: #f3f4f6; font-weight: bold;">åŸºæœ¬æƒ…å ±</td>
                        </tr>
                        <tr>
                            <td><code>id</code></td>
                            <td>BigAutoField</td>
                            <td><span class="badge badge-required">å¿…é ˆ</span></td>
                            <td>ä¸»ã‚­ãƒ¼ï¼ˆè‡ªå‹•æ¡ç•ªï¼‰</td>
                            <td>-</td>
                        </tr>
                        <tr>
                            <td><code>company_name</code></td>
                            <td>CharField(200)</td>
                            <td><span class="badge badge-required">å¿…é ˆ</span></td>
                            <td>ä¼šç¤¾åï¼ˆé€šç§°ï¼‰</td>
                            <td>âœ… æ¤œç´¢ã‚­ãƒ¼</td>
                        </tr>
                        <tr>
                            <td><code>legal_name</code></td>
                            <td>CharField(300)</td>
                            <td><span class="badge badge-optional">ä»»æ„</span></td>
                            <td>æ­£å¼åç§°</td>
                            <td>âœ…</td>
                        </tr>
                        <tr>
                            <td><code>email</code></td>
                            <td>EmailField</td>
                            <td><span class="badge badge-required">å¿…é ˆ</span></td>
                            <td>ä»£è¡¨ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹</td>
                            <td>-</td>
                        </tr>
                        <tr>
                            <td colspan="5" style="background: #f3f4f6; font-weight: bold;">ä¼æ¥­åŸºæœ¬æƒ…å ±ï¼ˆAIå–å¾—å¯¾è±¡ï¼‰</td>
                        </tr>
                        <tr>
                            <td><code>representative</code></td>
                            <td>CharField(100)</td>
                            <td><span class="badge badge-optional">ä»»æ„</span></td>
                            <td>ä»£è¡¨è€…å</td>
                            <td>âœ…</td>
                        </tr>
                        <tr>
                            <td><code>established_date</code></td>
                            <td>DateField</td>
                            <td><span class="badge badge-optional">ä»»æ„</span></td>
                            <td>è¨­ç«‹å¹´æœˆæ—¥</td>
                            <td>âœ…</td>
                        </tr>
                        <tr>
                            <td><code>capital</code></td>
                            <td>BigIntegerField</td>
                            <td><span class="badge badge-optional">ä»»æ„</span></td>
                            <td>è³‡æœ¬é‡‘ï¼ˆå††ï¼‰</td>
                            <td>âœ…</td>
                        </tr>
                        <tr>
                            <td><code>employee_count</code></td>
                            <td>IntegerField</td>
                            <td><span class="badge badge-optional">ä»»æ„</span></td>
                            <td>å¾“æ¥­å“¡æ•°</td>
                            <td>âœ…</td>
                        </tr>
                        <tr>
                            <td><code>industry</code></td>
                            <td>CharField(50)</td>
                            <td><span class="badge badge-optional">ä»»æ„</span></td>
                            <td>æ¥­ç¨®</td>
                            <td>âœ…</td>
                        </tr>
                        <tr>
                            <td><code>website</code></td>
                            <td>URLField</td>
                            <td><span class="badge badge-optional">ä»»æ„</span></td>
                            <td>å…¬å¼ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆ</td>
                            <td>âœ…</td>
                        </tr>
                        <tr>
                            <td><code>description</code></td>
                            <td>TextField</td>
                            <td><span class="badge badge-optional">ä»»æ„</span></td>
                            <td>äº‹æ¥­å†…å®¹</td>
                            <td>âœ…</td>
                        </tr>
                        <tr>
                            <td colspan="5" style="background: #f3f4f6; font-weight: bold;">æ‰€åœ¨åœ°æƒ…å ±ï¼ˆAIå–å¾—å¯¾è±¡ï¼‰</td>
                        </tr>
                        <tr>
                            <td><code>postal_code</code></td>
                            <td>CharField(10)</td>
                            <td><span class="badge badge-optional">ä»»æ„</span></td>
                            <td>éƒµä¾¿ç•ªå·</td>
                            <td>âœ…</td>
                        </tr>
                        <tr>
                            <td><code>prefecture</code></td>
                            <td>CharField(20)</td>
                            <td><span class="badge badge-optional">ä»»æ„</span></td>
                            <td>éƒ½é“åºœçœŒ</td>
                            <td>âœ…</td>
                        </tr>
                        <tr>
                            <td><code>city</code></td>
                            <td>CharField(100)</td>
                            <td><span class="badge badge-optional">ä»»æ„</span></td>
                            <td>å¸‚åŒºç”ºæ‘</td>
                            <td>âœ…</td>
                        </tr>
                        <tr>
                            <td><code>address</code></td>
                            <td>CharField(300)</td>
                            <td><span class="badge badge-optional">ä»»æ„</span></td>
                            <td>ç•ªåœ°ãƒ»ãƒ“ãƒ«å</td>
                            <td>âœ…</td>
                        </tr>
                        <tr>
                            <td><code>phone</code></td>
                            <td>CharField(50)</td>
                            <td><span class="badge badge-optional">ä»»æ„</span></td>
                            <td>ä»£è¡¨é›»è©±ç•ªå·</td>
                            <td>âœ…</td>
                        </tr>
                        <tr>
                            <td><code>fax</code></td>
                            <td>CharField(50)</td>
                            <td><span class="badge badge-optional">ä»»æ„</span></td>
                            <td>FAXç•ªå·</td>
                            <td>âœ…</td>
                        </tr>
                        <tr>
                            <td colspan="5" style="background: #f3f4f6; font-weight: bold;">æ‹…å½“è€…æƒ…å ±</td>
                        </tr>
                        <tr>
                            <td><code>contact_name</code></td>
                            <td>CharField(100)</td>
                            <td><span class="badge badge-optional">ä»»æ„</span></td>
                            <td>æ‹…å½“è€…å</td>
                            <td>-</td>
                        </tr>
                        <tr>
                            <td><code>contact_department</code></td>
                            <td>CharField(100)</td>
                            <td><span class="badge badge-optional">ä»»æ„</span></td>
                            <td>éƒ¨ç½²</td>
                            <td>-</td>
                        </tr>
                        <tr>
                            <td><code>contact_position</code></td>
                            <td>CharField(100)</td>
                            <td><span class="badge badge-optional">ä»»æ„</span></td>
                            <td>å½¹è·</td>
                            <td>-</td>
                        </tr>
                        <tr>
                            <td><code>contact_email</code></td>
                            <td>EmailField</td>
                            <td><span class="badge badge-optional">ä»»æ„</span></td>
                            <td>æ‹…å½“è€…ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹</td>
                            <td>-</td>
                        </tr>
                        <tr>
                            <td><code>contact_phone</code></td>
                            <td>CharField(50)</td>
                            <td><span class="badge badge-optional">ä»»æ„</span></td>
                            <td>æ‹…å½“è€…ç›´é€šé›»è©±</td>
                            <td>-</td>
                        </tr>
                        <tr>
                            <td><code>contact_mobile</code></td>
                            <td>CharField(50)</td>
                            <td><span class="badge badge-optional">ä»»æ„</span></td>
                            <td>æ‹…å½“è€…æºå¸¯é›»è©±</td>
                            <td>-</td>
                        </tr>
                        <tr>
                            <td colspan="5" style="background: #f3f4f6; font-weight: bold;">ãƒ“ã‚¸ãƒã‚¹æƒ…å ±</td>
                        </tr>
                        <tr>
                            <td><code>priority</code></td>
                            <td>CharField(1)</td>
                            <td><span class="badge badge-optional">ä»»æ„</span></td>
                            <td>å„ªå…ˆåº¦ï¼ˆA/B/Cï¼‰</td>
                            <td>-</td>
                        </tr>
                        <tr>
                            <td><code>lead_source</code></td>
                            <td>CharField(50)</td>
                            <td><span class="badge badge-optional">ä»»æ„</span></td>
                            <td>ãƒªãƒ¼ãƒ‰å…ƒ</td>
                            <td>-</td>
                        </tr>
                        <tr>
                            <td><code>assigned_sales_id</code></td>
                            <td>ForeignKey</td>
                            <td><span class="badge badge-optional">ä»»æ„</span></td>
                            <td>å–¶æ¥­æ‹…å½“è€…ï¼ˆMemberï¼‰</td>
                            <td>-</td>
                        </tr>
                        <tr>
                            <td><code>tags</code></td>
                            <td>JSONField</td>
                            <td><span class="badge badge-optional">ä»»æ„</span></td>
                            <td>ã‚¿ã‚°é…åˆ—</td>
                            <td>-</td>
                        </tr>
                        <tr>
                            <td><code>note</code></td>
                            <td>TextField</td>
                            <td><span class="badge badge-optional">ä»»æ„</span></td>
                            <td>å‚™è€ƒ</td>
                            <td>-</td>
                        </tr>
                        <tr>
                            <td colspan="5" style="background: #f3f4f6; font-weight: bold;">AIé–¢é€£</td>
                        </tr>
                        <tr>
                            <td><code>ai_generated</code></td>
                            <td>BooleanField</td>
                            <td><span class="badge badge-optional">ä»»æ„</span></td>
                            <td>AIç”Ÿæˆãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ©ã‚°</td>
                            <td><span class="badge badge-ai">AI</span></td>
                        </tr>
                        <tr>
                            <td><code>ai_generated_at</code></td>
                            <td>DateTimeField</td>
                            <td><span class="badge badge-optional">ä»»æ„</span></td>
                            <td>AIç”Ÿæˆæ—¥æ™‚</td>
                            <td><span class="badge badge-ai">AI</span></td>
                        </tr>
                        <tr>
                            <td><code>ai_confidence_score</code></td>
                            <td>IntegerField</td>
                            <td><span class="badge badge-optional">ä»»æ„</span></td>
                            <td>AIä¿¡é ¼åº¦ã‚¹ã‚³ã‚¢ï¼ˆ0-100ï¼‰</td>
                            <td><span class="badge badge-ai">AI</span></td>
                        </tr>
                        <tr>
                            <td colspan="5" style="background: #f3f4f6; font-weight: bold;">ã‚·ã‚¹ãƒ†ãƒ </td>
                        </tr>
                        <tr>
                            <td><code>created_at</code></td>
                            <td>DateTimeField</td>
                            <td><span class="badge badge-required">å¿…é ˆ</span></td>
                            <td>ä½œæˆæ—¥æ™‚</td>
                            <td>-</td>
                        </tr>
                        <tr>
                            <td><code>updated_at</code></td>
                            <td>DateTimeField</td>
                            <td><span class="badge badge-required">å¿…é ˆ</span></td>
                            <td>æœ€çµ‚æ›´æ–°æ—¥æ™‚</td>
                            <td>-</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <h3>2. Contractãƒ†ãƒ¼ãƒ–ãƒ« <span class="badge badge-new">NEW</span></h3>
            <p>ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¨ã¯1å¯¾å¤šã®é–¢ä¿‚ã§ç®¡ç†ã—ã¾ã™ã€‚</p>

            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å</th>
                            <th>å‹</th>
                            <th>å¿…é ˆ</th>
                            <th>èª¬æ˜</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>id</code></td>
                            <td>BigAutoField</td>
                            <td><span class="badge badge-required">å¿…é ˆ</span></td>
                            <td>ä¸»ã‚­ãƒ¼</td>
                        </tr>
                        <tr>
                            <td><code>client_id</code></td>
                            <td>ForeignKey</td>
                            <td><span class="badge badge-required">å¿…é ˆ</span></td>
                            <td>ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆID</td>
                        </tr>
                        <tr>
                            <td><code>contract_number</code></td>
                            <td>CharField(50)</td>
                            <td><span class="badge badge-required">å¿…é ˆ</span></td>
                            <td>å¥‘ç´„ç•ªå·</td>
                        </tr>
                        <tr>
                            <td><code>contract_name</code></td>
                            <td>CharField(200)</td>
                            <td><span class="badge badge-required">å¿…é ˆ</span></td>
                            <td>å¥‘ç´„å</td>
                        </tr>
                        <tr>
                            <td><code>contract_type</code></td>
                            <td>CharField(20)</td>
                            <td><span class="badge badge-required">å¿…é ˆ</span></td>
                            <td>æœˆé¡/å¹´é¡/ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ™ãƒ¼ã‚¹/ä¿å®ˆ</td>
                        </tr>
                        <tr>
                            <td><code>status</code></td>
                            <td>CharField(20)</td>
                            <td><span class="badge badge-required">å¿…é ˆ</span></td>
                            <td>è¦‹ç©ä¸­/å¥‘ç´„ä¸­/ä¼‘æ­¢ä¸­/çµ‚äº†</td>
                        </tr>
                        <tr>
                            <td><code>start_date</code></td>
                            <td>DateField</td>
                            <td><span class="badge badge-required">å¿…é ˆ</span></td>
                            <td>å¥‘ç´„é–‹å§‹æ—¥</td>
                        </tr>
                        <tr>
                            <td><code>end_date</code></td>
                            <td>DateField</td>
                            <td><span class="badge badge-optional">ä»»æ„</span></td>
                            <td>å¥‘ç´„çµ‚äº†æ—¥</td>
                        </tr>
                        <tr>
                            <td><code>renewal_date</code></td>
                            <td>DateField</td>
                            <td><span class="badge badge-optional">ä»»æ„</span></td>
                            <td>æ¬¡å›æ›´æ–°æ—¥</td>
                        </tr>
                        <tr>
                            <td><code>contract_amount</code></td>
                            <td>DecimalField</td>
                            <td><span class="badge badge-required">å¿…é ˆ</span></td>
                            <td>å¥‘ç´„é‡‘é¡</td>
                        </tr>
                        <tr>
                            <td><code>billing_cycle</code></td>
                            <td>CharField(20)</td>
                            <td><span class="badge badge-optional">ä»»æ„</span></td>
                            <td>æœˆæ¬¡/å››åŠæœŸ/å¹´æ¬¡</td>
                        </tr>
                        <tr>
                            <td><code>payment_terms</code></td>
                            <td>CharField(100)</td>
                            <td><span class="badge badge-optional">ä»»æ„</span></td>
                            <td>æ”¯æ‰•æ¡ä»¶</td>
                        </tr>
                        <tr>
                            <td><code>payment_method</code></td>
                            <td>CharField(50)</td>
                            <td><span class="badge badge-optional">ä»»æ„</span></td>
                            <td>æ”¯æ‰•æ–¹æ³•</td>
                        </tr>
                        <tr>
                            <td><code>billing_address</code></td>
                            <td>TextField</td>
                            <td><span class="badge badge-optional">ä»»æ„</span></td>
                            <td>è«‹æ±‚å…ˆä½æ‰€</td>
                        </tr>
                        <tr>
                            <td><code>billing_contact</code></td>
                            <td>CharField(100)</td>
                            <td><span class="badge badge-optional">ä»»æ„</span></td>
                            <td>è«‹æ±‚å…ˆæ‹…å½“è€…</td>
                        </tr>
                        <tr>
                            <td><code>sla_level</code></td>
                            <td>CharField(20)</td>
                            <td><span class="badge badge-optional">ä»»æ„</span></td>
                            <td>SLAãƒ¬ãƒ™ãƒ«</td>
                        </tr>
                        <tr>
                            <td><code>auto_renewal</code></td>
                            <td>BooleanField</td>
                            <td><span class="badge badge-optional">ä»»æ„</span></td>
                            <td>è‡ªå‹•æ›´æ–°ãƒ•ãƒ©ã‚°</td>
                        </tr>
                        <tr>
                            <td><code>note</code></td>
                            <td>TextField</td>
                            <td><span class="badge badge-optional">ä»»æ„</span></td>
                            <td>å‚™è€ƒ</td>
                        </tr>
                        <tr>
                            <td><code>created_at</code></td>
                            <td>DateTimeField</td>
                            <td><span class="badge badge-required">å¿…é ˆ</span></td>
                            <td>ä½œæˆæ—¥æ™‚</td>
                        </tr>
                        <tr>
                            <td><code>updated_at</code></td>
                            <td>DateTimeField</td>
                            <td><span class="badge badge-required">å¿…é ˆ</span></td>
                            <td>æœ€çµ‚æ›´æ–°æ—¥æ™‚</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- AIæ©Ÿèƒ½è¨­è¨ˆ -->
        <section class="section">
            <h2><span class="emoji">ğŸ¤–</span>AIæ©Ÿèƒ½è¨­è¨ˆ</h2>

            <h3>1. ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£</h3>
            <div class="architecture-diagram">
<pre>
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Frontend (React + TypeScript)                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ä»»æ„ã®æ©Ÿèƒ½ç”»é¢ï¼ˆã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆç®¡ç†ã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç­‰ï¼‰        â”‚  â”‚
â”‚  â”‚  // ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰APIçµŒç”±ã§AIæ©Ÿèƒ½ã‚’åˆ©ç”¨                   â”‚  â”‚
â”‚  â”‚  await fetch('/api/clients/ai-fetch/', {                â”‚  â”‚
â”‚  â”‚    method: 'POST',                                      â”‚  â”‚
â”‚  â”‚    body: JSON.stringify({ company_name: '...' })       â”‚  â”‚
â”‚  â”‚  })                                                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  AIè¨­å®šç”»é¢ï¼ˆå…¨ã‚·ã‚¹ãƒ†ãƒ å…±é€šï¼‰- /settings/ai              â”‚  â”‚
â”‚  â”‚  - ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ä¸€è¦§ãƒ»CRUDæ“ä½œ                           â”‚  â”‚
â”‚  â”‚  - APIã‚­ãƒ¼ç®¡ç†ï¼ˆæš—å·åŒ–ä¿å­˜ï¼‰                            â”‚  â”‚
â”‚  â”‚  - æ¥ç¶šãƒ†ã‚¹ãƒˆãƒ»ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼      â”‚  â”‚
â”‚  â”‚  - aiStreamService.ts ã§SSEã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å‡¦ç†           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚ REST API + SSE
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Backend (Django + DRF)                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ai_services ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ï¼ˆå…¨ã‚·ã‚¹ãƒ†ãƒ å…±é€šï¼‰                 â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚ __init__.py - çµ±ä¸€ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ               â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ from ai_services import (                       â”‚  â”‚  â”‚
â”‚  â”‚  â”‚   AIClient,                # çµ±åˆã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚   get_default_ai_client,   # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå–å¾—    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚   get_ai_client            # ID/åå‰æŒ‡å®šå–å¾—   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ )                                               â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚ llm_client.py - AIClientçµ±åˆã‚¯ãƒ©ã‚¹                â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â”‚ AIClient                                     â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â”‚ - generate(prompt, **kwargs) â†’ str          â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â”‚ - generate_stream(prompt, **kwargs)         â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â”‚   â†’ Generator[str]                          â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â”‚                                              â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â”‚ ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼åˆ¥å®Ÿè£…ï¼ˆæœ€é©åŒ–æ¸ˆã¿ï¼‰:             â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â”‚ - _stream_azure_openai()                    â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â”‚   â†’ AzureOpenAI SDK (openai 1.54.0)        â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â”‚ - _stream_openai()                          â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â”‚   â†’ OpenAI SDK (openai 1.54.0)             â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â”‚ - _stream_anthropic()                       â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â”‚   â†’ Anthropic SDK (anthropic 0.39.0)       â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â”‚ - _stream_google()                          â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â”‚   â†’ Google Genai SDK (google-genai 1.50.1) â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â”‚   âœ… å…¬å¼generate_content_streamä½¿ç”¨        â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â”‚   âœ… ãƒãƒ£ãƒ³ã‚¯å˜ä½ã§æœ€é©åŒ–                   â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â”‚ get_default_ai_client()                     â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â”‚ â†’ is_default=Trueã®ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã§åˆæœŸåŒ–     â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â”‚ get_ai_client(id=None, name=None)           â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â”‚ â†’ æŒ‡å®šãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã§åˆæœŸåŒ–                   â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚ exceptions.py - ã‚«ã‚¹ã‚¿ãƒ ä¾‹å¤–                       â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ - AIServiceError (åŸºåº•ã‚¯ãƒ©ã‚¹)                   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ - ProviderNotFoundError                         â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ - APIKeyNotConfiguredError                      â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ - APICallError                                  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ - StreamingError                                â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ai_settings ã‚¢ãƒ—ãƒªï¼ˆè¨­å®šç®¡ç†ï¼‰                           â”‚  â”‚
â”‚  â”‚  - AIProvider ãƒ¢ãƒ‡ãƒ«ï¼ˆDBãƒ»æš—å·åŒ–APIã‚­ãƒ¼ï¼‰                â”‚  â”‚
â”‚  â”‚  - AIProviderViewSet (REST API)                          â”‚  â”‚
â”‚  â”‚    âœ… perform_content_negotiation() ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰       â”‚  â”‚
â”‚  â”‚    âœ… finalize_response() ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰                 â”‚  â”‚
â”‚  â”‚    â†’ test_prompt: SSEã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å¯¾å¿œ                 â”‚  â”‚
â”‚  â”‚    â†’ StreamingHttpResponseç›´æ¥è¿”å´                      â”‚  â”‚
â”‚  â”‚  - æš—å·åŒ–ãƒ»å¾©å·åŒ–å‡¦ç†ï¼ˆcryptographyä½¿ç”¨ï¼‰                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  å„æ©Ÿèƒ½ã‚¢ãƒ—ãƒªï¼ˆclients, documents, ç­‰ï¼‰                   â”‚  â”‚
â”‚  â”‚  from ai_services import get_default_ai_client           â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚  # ç°¡å˜3è¡Œã§AIæ©Ÿèƒ½åˆ©ç”¨                                    â”‚  â”‚
â”‚  â”‚  client = get_default_ai_client()                        â”‚  â”‚
â”‚  â”‚  response = client.generate("ä¼æ¥­æƒ…å ±ã‚’å–å¾—")            â”‚  â”‚
â”‚  â”‚  # ã¾ãŸã¯                                                 â”‚  â”‚
â”‚  â”‚  for chunk in client.generate_stream("..."):             â”‚  â”‚
â”‚  â”‚      yield chunk  # SSEã§ãƒ•ãƒ­ãƒ³ãƒˆã¸                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚ HTTPS API Calls
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  External AI Services                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Azure OpenAI â”‚  â”‚    OpenAI    â”‚  â”‚   Anthropic        â”‚   â”‚
â”‚  â”‚   (GPT-4o)   â”‚  â”‚  (GPT-4o)    â”‚  â”‚ (Claude 3.5 Sonnet)â”‚   â”‚
â”‚  â”‚ SDK: openai  â”‚  â”‚ SDK: openai  â”‚  â”‚ SDK: anthropic     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚  â”‚      Google Gemini             â”‚                            â”‚
â”‚  â”‚  (Gemini 2.0 Flash Exp)        â”‚                            â”‚
â”‚  â”‚  SDK: google-genai 1.50.1     â”‚                            â”‚
â”‚  â”‚  âœ… å…¬å¼SDKãƒ»æœ€é©åŒ–æ¸ˆã¿         â”‚                            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</pre>
            </div>

            <h3>1.1 AIè¨­å®šã®å…±é€šåŒ–è¨­è¨ˆ</h3>
            <div class="info-box">
                <h4>è¨­è¨ˆæ€æƒ³</h4>
                <p>AIæ©Ÿèƒ½ã‚’å…¨ã‚·ã‚¹ãƒ†ãƒ ã§çµ±ä¸€çš„ã«åˆ©ç”¨ã§ãã‚‹ã‚ˆã†ã€<strong>ai_services ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸</strong>ã¨ã—ã¦å…±é€šåŒ–ã—ã¾ã™ã€‚
                ä»»æ„ã®æ©Ÿèƒ½ï¼ˆã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆæƒ…å ±å–å¾—ã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç”Ÿæˆã€ãƒãƒ£ãƒƒãƒˆæ©Ÿèƒ½ãªã©ï¼‰ã‹ã‚‰ã€
                3è¡Œã®ã‚³ãƒ¼ãƒ‰ã§AIæ©Ÿèƒ½ã‚’ç°¡å˜ã«å‘¼ã³å‡ºã›ã‚‹è¨­è¨ˆã§ã™ã€‚</p>
                
                <h4>åˆ©ç”¨ä¾‹ï¼ˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼‰</h4>
                <pre><code class="language-python"># ä¾‹1: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚’ä½¿ç”¨
from ai_services import get_default_ai_client

client = get_default_ai_client()
response = client.generate("æ±äº¬ã®å¤©æ°—ã‚’æ•™ãˆã¦")
print(response)

# ä¾‹2: ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ç”Ÿæˆï¼ˆSSEå¯¾å¿œï¼‰
def stream_response():
    client = get_default_ai_client()
    for chunk in client.generate_stream("é•·ã„æ–‡ç« ã‚’ç”Ÿæˆ"):
        # ãƒãƒ£ãƒ³ã‚¯å˜ä½ã§æœ€é©åŒ–ã•ã‚ŒãŸã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°
        yield f"data: {{\"content\": \"{chunk}\"}}\n\n"
    yield f"data: {{\"done\": true}}\n\n"

return StreamingHttpResponse(stream_response(), 
                             content_type='text/event-stream')

# ä¾‹3: ç‰¹å®šã®ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚’æŒ‡å®š
from ai_services import get_ai_client

client = get_ai_client(provider_id=2)  # IDæŒ‡å®š
client = get_ai_client(provider_name="GPT-4")  # åå‰æŒ‡å®š
response = client.generate("æŠ€è¡“çš„ãªè³ªå•")</code></pre>

                <h4>åˆ©ç”¨ä¾‹ï¼ˆãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼‰</h4>
                <pre><code class="language-typescript">// ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ãƒ¬ã‚¹ãƒãƒ³ã‚¹å—ä¿¡ï¼ˆæœ€é©åŒ–ç‰ˆï¼‰
import { aiStreamService } from '@/services/aiStreamService';

// 90è¡Œ â†’ 15è¡Œã«æœ€é©åŒ–
await aiStreamService.streamPrompt(
  `/api/ai-providers/${id}/test_prompt/`,
  { prompt: 'ã“ã‚“ã«ã¡ã¯' },
  {
    onChunk: (content) => setResponse(prev => prev + content),
    onComplete: () => toast.success('å®Œäº†'),
    onError: (error) => toast.error(error)
  }
);</code></pre>

                <h4>å…±é€šåŒ–ã®åˆ©ç‚¹</h4>
                <ul>
                    <li><strong>çµ±ä¸€ã•ã‚ŒãŸã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹:</strong> å…¨æ©Ÿèƒ½ã§åŒã˜APIã‚’ä½¿ç”¨</li>
                    <li><strong>è¨­å®šã®ä¸€å…ƒç®¡ç†:</strong> AIè¨­å®šç”»é¢ã§å…¨ä½“ã‚’ç®¡ç†ï¼ˆæš—å·åŒ–APIã‚­ãƒ¼ï¼‰</li>
                    <li><strong>ç°¡å˜ãªä½¿ç”¨æ³•:</strong> 3è¡Œã®ã‚³ãƒ¼ãƒ‰ã§AIæ©Ÿèƒ½ã‚’åˆ©ç”¨å¯èƒ½</li>
                    <li><strong>ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼é€éæ€§:</strong> å®Ÿè£…ã‚’å¤‰ãˆãšã«ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼åˆ‡ã‚Šæ›¿ãˆå¯èƒ½</li>
                    <li><strong>ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°:</strong> ã‚«ã‚¹ã‚¿ãƒ ä¾‹å¤–ã§æ˜ç¢ºãªã‚¨ãƒ©ãƒ¼å‡¦ç†</li>
                    <li><strong>æ‹¡å¼µæ€§:</strong> æ–°ã—ã„ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®è¿½åŠ ãŒå®¹æ˜“</li>
                    <li><strong>ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°æœ€é©åŒ–:</strong> ãƒãƒ£ãƒ³ã‚¯å˜ä½ã®åŠ¹ç‡çš„ãªã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°</li>
                    <li><strong>DRFçµ±åˆ:</strong> perform_content_negotiation/finalize_responseã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ã§SSEå¯¾å¿œ</li>
                    <li><strong>å…¬å¼SDKä½¿ç”¨:</strong> å…¨ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã§å…¬å¼SDKã‚’ä½¿ç”¨ï¼ˆå®‰å®šæ€§ãƒ»æœ€æ–°æ©Ÿèƒ½ï¼‰</li>
                </ul>
            </div>

            <h3>2. ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼</h3>

            <h4>ãƒ‘ã‚¿ãƒ¼ãƒ³0: AIè¨­å®šã®æ¥ç¶šãƒ†ã‚¹ãƒˆï¼ˆã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ï¼‰</h4>
            <div class="workflow-box">
                <ol>
                    <li><strong>ãƒ¦ãƒ¼ã‚¶ãƒ¼:</strong> AIè¨­å®šç”»é¢ã§ã€Œæ¥ç¶šãƒ†ã‚¹ãƒˆã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯</li>
                    <li><strong>Frontend:</strong> ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå…¥åŠ›ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚’è¡¨ç¤º</li>
                    <li><strong>Frontend:</strong> aiStreamService.streamPrompt() ã§SSEæ¥ç¶šé–‹å§‹
                        <ul>
                            <li>URL: <code>/api/ai-providers/{id}/test_prompt/</code></li>
                            <li>Accept: text/event-stream</li>
                        </ul>
                    </li>
                    <li><strong>Backend:</strong> AIProviderViewSet.test_prompt() ãŒå‘¼ã³å‡ºã•ã‚Œã‚‹
                        <ul>
                            <li>perform_content_negotiation() ã§DRFã®ãƒã‚´ã‚·ã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã‚¹ã‚­ãƒƒãƒ—</li>
                            <li>AIClient(provider).generate_stream() ã§ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ç”Ÿæˆ</li>
                            <li>å„ãƒãƒ£ãƒ³ã‚¯ã‚’ <code>data: {"content": "..."}</code> å½¢å¼ã§é€ä¿¡</li>
                            <li>finalize_response() ã§StreamingHttpResponseã‚’ç›´æ¥è¿”å´ï¼ˆDRFå‡¦ç†ãƒã‚¤ãƒ‘ã‚¹ï¼‰</li>
                        </ul>
                    </li>
                    <li><strong>Frontend:</strong> parseSSEStream() ã§ãƒãƒ£ãƒ³ã‚¯ã‚’å—ä¿¡
                        <ul>
                            <li>data: ã§å§‹ã¾ã‚‹è¡Œã‚’JSONãƒ‘ãƒ¼ã‚¹</li>
                            <li>onChunk ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã§ç”»é¢æ›´æ–°</li>
                            <li>done: true ã§å®Œäº†å‡¦ç†</li>
                        </ul>
                    </li>
                    <li><strong>ãƒ¦ãƒ¼ã‚¶ãƒ¼:</strong> ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ç”Ÿæˆã•ã‚Œã‚‹ãƒ†ã‚­ã‚¹ãƒˆã‚’ç¢ºèª</li>
                </ol>
                <div class="highlight">
                    <strong>æœ€é©åŒ–ãƒã‚¤ãƒ³ãƒˆ:</strong>
                    <ul>
                        <li>æ–‡å­—å˜ä½ â†’ ãƒãƒ£ãƒ³ã‚¯å˜ä½ã®é€ä¿¡ï¼ˆ90%ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Šï¼‰</li>
                        <li>ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å‡¦ç†: 90è¡Œ â†’ 15è¡Œï¼ˆaiStreamServiceå°å…¥ï¼‰</li>
                        <li>Google Gemini: å…¬å¼generate_content_streamä½¿ç”¨</li>
                        <li>DRFãƒã‚¤ãƒ‘ã‚¹: perform_content_negotiation + finalize_response</li>
                    </ul>
                </div>
            </div>

            <h4>ãƒ‘ã‚¿ãƒ¼ãƒ³1: ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆæ–°è¦ä½œæˆæ™‚ã®AIå–å¾—</h4>
            <div class="workflow-box">
                <ol>
                    <li><strong>ãƒ¦ãƒ¼ã‚¶ãƒ¼:</strong> ä¼šç¤¾åã‚’å…¥åŠ›ï¼ˆä¾‹ï¼šã€Œãƒˆãƒ¨ã‚¿è‡ªå‹•è»Šã€ï¼‰</li>
                    <li><strong>ãƒ¦ãƒ¼ã‚¶ãƒ¼:</strong> ã€ŒğŸ¤– AIã§ä¼æ¥­æƒ…å ±ã‚’å–å¾—ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯</li>
                    <li><strong>Frontend:</strong> <code>POST /api/clients/ai-fetch/</code> ãƒªã‚¯ã‚¨ã‚¹ãƒˆé€ä¿¡</li>
                    <li><strong>Backend:</strong> AI Serviceã‚’å‘¼ã³å‡ºã—
                        <ul>
                            <li>SearchClientã§ä¼æ¥­æƒ…å ±ã‚’æ¤œç´¢ï¼ˆå…¬å¼ã‚µã‚¤ãƒˆã€Wikipediaã€ä¼æ¥­DBãªã©ï¼‰</li>
                            <li>æ¤œç´¢çµæœã‚’LLMã«æ¸¡ã—ã¦æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿ã«å¤‰æ›</li>
                            <li>ä¿¡é ¼åº¦ã‚¹ã‚³ã‚¢ã‚’è¨ˆç®—</li>
                        </ul>
                    </li>
                    <li><strong>Backend:</strong> JSONå½¢å¼ã§ä¼æ¥­æƒ…å ±ã‚’è¿”å´</li>
                    <li><strong>Frontend:</strong> å–å¾—ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼è¡¨ç¤º
                        <ul>
                            <li>å„ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«âœ…ãƒãƒ¼ã‚¯è¡¨ç¤ºï¼ˆç¢ºèªæ¸ˆã¿ãƒãƒ¼ã‚¯ï¼‰</li>
                            <li>ä¿¡é ¼åº¦ã‚¹ã‚³ã‚¢ã‚’ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ã§è¡¨ç¤º</li>
                            <li>ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå€‹åˆ¥ã«ä¿®æ­£å¯èƒ½</li>
                        </ul>
                    </li>
                    <li><strong>ãƒ¦ãƒ¼ã‚¶ãƒ¼:</strong> å†…å®¹ã‚’ç¢ºèªãƒ»å¿…è¦ã«å¿œã˜ã¦ä¿®æ­£</li>
                    <li><strong>ãƒ¦ãƒ¼ã‚¶ãƒ¼:</strong> ã€Œä¿å­˜ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯</li>
                    <li><strong>Frontend:</strong> <code>POST /api/clients/</code> ã§ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆä½œæˆ</li>
                </ol>
            </div>

            <h4>ãƒ‘ã‚¿ãƒ¼ãƒ³2: æ—¢å­˜ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®æƒ…å ±æ›´æ–°</h4>
            <div class="workflow-box">
                <ol>
                    <li><strong>ãƒ¦ãƒ¼ã‚¶ãƒ¼:</strong> ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆè©³ç´°ç”»é¢ã‚’é–‹ã</li>
                    <li><strong>ãƒ¦ãƒ¼ã‚¶ãƒ¼:</strong> ã€ŒğŸ”„ æœ€æ–°æƒ…å ±ã«æ›´æ–°ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯</li>
                    <li><strong>Frontend:</strong> <code>POST /api/clients/{id}/ai-refresh/</code> ãƒªã‚¯ã‚¨ã‚¹ãƒˆé€ä¿¡</li>
                    <li><strong>Backend:</strong> æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã¨æœ€æ–°ãƒ‡ãƒ¼ã‚¿ã‚’æ¯”è¼ƒ
                        <ul>
                            <li>å¤‰æ›´ãŒã‚ã‚‹é …ç›®ã®ã¿ã‚’ãƒªã‚¹ãƒˆã‚¢ãƒƒãƒ—</li>
                            <li>æ—§å€¤ã¨æ–°å€¤ã®å·®åˆ†ã‚’ç”Ÿæˆ</li>
                        </ul>
                    </li>
                    <li><strong>Frontend:</strong> å·®åˆ†ã‚’è¡¨å½¢å¼ã§è¡¨ç¤ºï¼ˆæ—§ â†’ æ–°ï¼‰</li>
                    <li><strong>ãƒ¦ãƒ¼ã‚¶ãƒ¼:</strong> é©ç”¨ã™ã‚‹é …ç›®ã‚’ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã§é¸æŠ</li>
                    <li><strong>ãƒ¦ãƒ¼ã‚¶ãƒ¼:</strong> ã€Œæ›´æ–°ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯</li>
                    <li><strong>Frontend:</strong> <code>PATCH /api/clients/{id}/</code> ã§æ›´æ–°</li>
                </ol>
            </div>

            <h3>3. APIä»•æ§˜</h3>

            <h4>POST /api/clients/ai-fetch/</h4>
            <p>ä¼æ¥­åã‹ã‚‰AIã§æƒ…å ±ã‚’å–å¾—ã—ã¾ã™ã€‚</p>

            <div class="info-box">
                <strong>Request:</strong>
                <pre><code>{
  "company_name": "ãƒˆãƒ¨ã‚¿è‡ªå‹•è»Š"
}</code></pre>
            </div>

            <div class="info-box">
                <strong>Response:</strong>
                <pre><code>{
  "success": true,
  "data": {
    "company_name": "ãƒˆãƒ¨ã‚¿è‡ªå‹•è»Š",
    "legal_name": "ãƒˆãƒ¨ã‚¿è‡ªå‹•è»Šæ ªå¼ä¼šç¤¾",
    "representative": "ä½è—¤ æ’æ²»",
    "established_date": "1937-08-28",
    "capital": 635401000000,
    "employee_count": 375235,
    "industry": "è£½é€ ",
    "website": "https://www.toyota.co.jp/",
    "description": "è‡ªå‹•è»Šã®è£½é€ ãƒ»è²©å£²ã‚’ä¸»åŠ›äº‹æ¥­ã¨ã™ã‚‹...",
    "postal_code": "471-8571",
    "prefecture": "æ„›çŸ¥çœŒ",
    "city": "è±Šç”°å¸‚",
    "address": "ãƒˆãƒ¨ã‚¿ç”º1ç•ªåœ°",
    "phone": "0565-28-2121",
    "fax": "0565-23-5800"
  },
  "confidence_score": 92,
  "source": "AI Generated",
  "generated_at": "2025-11-15T10:30:00Z"
}</code></pre>
            </div>

            <h4>POST /api/clients/{id}/ai-refresh/</h4>
            <p>æ—¢å­˜ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®æƒ…å ±ã‚’æœ€æ–°åŒ–ã—ã¾ã™ã€‚</p>

            <div class="info-box">
                <strong>Response:</strong>
                <pre><code>{
  "success": true,
  "changes": [
    {
      "field": "representative",
      "old_value": "è±Šç”° ç« ç”·",
      "new_value": "ä½è—¤ æ’æ²»",
      "confidence": 95
    },
    {
      "field": "employee_count",
      "old_value": 366283,
      "new_value": 375235,
      "confidence": 88
    }
  ],
  "generated_at": "2025-11-15T10:30:00Z"
}</code></pre>
            </div>
        </section>

        <!-- UIè¨­è¨ˆ -->
        <section class="section">
            <h2><span class="emoji">ğŸ¨</span>UI/UXè¨­è¨ˆ</h2>

            <h3>1. ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆä½œæˆãƒ•ã‚©ãƒ¼ãƒ </h3>
            <div class="ui-mockup">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆæ–°è¦ç™»éŒ²                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚ ä¼šç¤¾å *                                                â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ ãƒˆãƒ¨ã‚¿è‡ªå‹•è»Š                                      â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                         â”‚
â”‚ [ğŸ¤– AIã§ä¼æ¥­æƒ…å ±ã‚’å–å¾—]  [ğŸ”„ ã‚¯ãƒªã‚¢]                    â”‚
â”‚                                                         â”‚
â”‚ â”â”â”â”â”â” AIå–å¾—æƒ…å ±ï¼ˆç¢ºèªã—ã¦ãã ã•ã„ï¼‰ â”â”â”â”â”â”â”          â”‚
â”‚                                                         â”‚
â”‚ æ­£å¼åç§°                                                â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ ãƒˆãƒ¨ã‚¿è‡ªå‹•è»Šæ ªå¼ä¼šç¤¾                              â”‚ âœ…â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                         â”‚
â”‚ ä»£è¡¨è€…å                                                â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ ä½è—¤ æ’æ²»                                         â”‚ âœ…â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                         â”‚
â”‚ è¨­ç«‹å¹´æœˆæ—¥                    è³‡æœ¬é‡‘                    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚ â”‚ 1937-08-28      â”‚âœ… â”‚ 635,401,000,000 å††  â”‚âœ…  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                         â”‚
â”‚ ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆ                                            â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ https://www.toyota.co.jp/                        â”‚ âœ…â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                         â”‚
â”‚ ä¿¡é ¼åº¦: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 92%                        â”‚
â”‚                                                         â”‚
â”‚ [ä¿å­˜]  [ã‚­ãƒ£ãƒ³ã‚»ãƒ«]                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            </div>

            <h3>2. AIè¨­å®šç”»é¢</h3>
            <div class="ui-mockup">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AIè¨­å®š                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚ â”Œâ”€â”€â”€ AI Provider â”€â”€â”€â”¬â”€â”€â”€ æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³ â”€â”€â”€â”¬â”€â”€â”€ ä¸€èˆ¬ â”€â”€â”€â”â”‚
â”‚ â”‚                                                      â”‚â”‚
â”‚ â”‚ â–¼ AI Providerä¸€è¦§                      [æ–°è¦è¿½åŠ ]   â”‚â”‚
â”‚ â”‚                                                      â”‚â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚
â”‚ â”‚ â”‚ AZURE OPENAI              [ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ] [æœ‰åŠ¹]   â”‚ â”‚â”‚
â”‚ â”‚ â”‚ Model: gpt-4o | Max Tokens: 2000 | Temp: 0.7  â”‚ â”‚â”‚
â”‚ â”‚ â”‚ âœ“ ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆæƒ…å ±å……å®ŸåŒ–  âœ“ ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç”Ÿæˆ    â”‚ â”‚â”‚
â”‚ â”‚ â”‚ [ğŸ”Œ æ¥ç¶šãƒ†ã‚¹ãƒˆ] [ç·¨é›†] [å‰Šé™¤]                   â”‚ â”‚â”‚
â”‚ â”‚ â”‚                                                  â”‚ â”‚â”‚
â”‚ â”‚ â”‚ === æ¥ç¶šãƒ†ã‚¹ãƒˆãƒ€ã‚¤ã‚¢ãƒ­ã‚° ===                     â”‚ â”‚â”‚
â”‚ â”‚ â”‚ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ:                                      â”‚ â”‚â”‚
â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚â”‚
â”‚ â”‚ â”‚ â”‚ ã“ã‚“ã«ã¡ã¯ã€‚ã‚ãªãŸã¯èª°ã§ã™ã‹?             â”‚   â”‚ â”‚â”‚
â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚â”‚
â”‚ â”‚ â”‚ [å®Ÿè¡Œ] [é–‰ã˜ã‚‹]                                  â”‚ â”‚â”‚
â”‚ â”‚ â”‚                                                  â”‚ â”‚â”‚
â”‚ â”‚ â”‚ ãƒ¬ã‚¹ãƒãƒ³ã‚¹: (ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°è¡¨ç¤º)     â”‚ â”‚â”‚
â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚â”‚
â”‚ â”‚ â”‚ â”‚ ã“ã‚“ã«ã¡ã¯!ç§ã¯AIã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã§ã™ã€‚...    â”‚   â”‚ â”‚â”‚
â”‚ â”‚ â”‚ â”‚ â–Š (ã‚«ãƒ¼ã‚½ãƒ«ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³)                â”‚   â”‚ â”‚â”‚
â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚
â”‚ â”‚                                                      â”‚â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚
â”‚ â”‚ â”‚ OPENAI                              [æœ‰åŠ¹]       â”‚ â”‚â”‚
â”‚ â”‚ â”‚ Model: gpt-4o-mini | Max Tokens: 4000 | Temp: 0.5â”‚â”‚â”‚
â”‚ â”‚ â”‚ âœ“ ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆæƒ…å ±å……å®ŸåŒ–  âœ— ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç”Ÿæˆ    â”‚ â”‚â”‚
â”‚ â”‚ â”‚ [æ¥ç¶šãƒ†ã‚¹ãƒˆ] [ç·¨é›†] [å‰Šé™¤]                      â”‚ â”‚â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚
â”‚ â”‚                                                      â”‚â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚
â”‚ â”‚ â”‚ ANTHROPIC (CLAUDE)                  [æœ‰åŠ¹]       â”‚ â”‚â”‚
â”‚ â”‚ â”‚ Model: claude-3-5-sonnet | Max Tokens: 4096     â”‚ â”‚â”‚
â”‚ â”‚ â”‚ âœ— ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆæƒ…å ±å……å®ŸåŒ–  âœ“ ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç”Ÿæˆ    â”‚ â”‚â”‚
â”‚ â”‚ â”‚ [æ¥ç¶šãƒ†ã‚¹ãƒˆ] [ç·¨é›†] [å‰Šé™¤]                      â”‚ â”‚â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚
â”‚ â”‚                                                      â”‚â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚
â”‚ â”‚ â”‚ GOOGLE GEMINI                       [æœ‰åŠ¹]       â”‚ â”‚â”‚
â”‚ â”‚ â”‚ Model: gemini-2.0-flash-exp | Max Tokens: 8192  â”‚ â”‚â”‚
â”‚ â”‚ â”‚ âœ“ ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆæƒ…å ±å……å®ŸåŒ–  âœ— ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç”Ÿæˆ    â”‚ â”‚â”‚
â”‚ â”‚ â”‚ [æ¥ç¶šãƒ†ã‚¹ãƒˆ] [ç·¨é›†] [å‰Šé™¤]                      â”‚ â”‚â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                         â”‚
â”‚ === AI Providerç·¨é›†ãƒ€ã‚¤ã‚¢ãƒ­ã‚° ===                       â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ AI Provideræ–°è¦è¿½åŠ                                 â”‚ â”‚
â”‚ â”‚                                                     â”‚ â”‚
â”‚ â”‚ è¨­å®šå *                                            â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚ â”‚ â”‚ Azure OpenAI æœ¬ç•ªç’°å¢ƒ                          â”‚ â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚ â”‚                                                     â”‚ â”‚
â”‚ â”‚ Provider Type *                                     â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚ â”‚ â”‚ Azure OpenAI                              â–¼   â”‚ â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚ â”‚                                                     â”‚ â”‚
â”‚ â”‚ --- Azure OpenAIå›ºæœ‰ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ ---                 â”‚ â”‚
â”‚ â”‚ Endpoint *                                          â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚ â”‚ â”‚ https://your-resource.openai.azure.com/        â”‚ â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚ â”‚                                                     â”‚ â”‚
â”‚ â”‚ API Version *                                       â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚ â”‚ â”‚ 2024-08-01-preview                             â”‚ â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚ â”‚ Azure OpenAIã®APIãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼ˆä¾‹: 2024-02-01ï¼‰      â”‚ â”‚
â”‚ â”‚                                                     â”‚ â”‚
â”‚ â”‚ Deployment Name                                     â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚ â”‚ â”‚ gpt-4o-deployment                              â”‚ â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚ â”‚ ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆåï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰                      â”‚ â”‚
â”‚ â”‚                                                     â”‚ â”‚
â”‚ â”‚ API Key *                                           â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚ â”‚ â”‚ ********************************              â”‚ â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚ â”‚                                                     â”‚ â”‚
â”‚ â”‚ Model Name *                                        â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚ â”‚ â”‚ gpt-4o                                         â”‚ â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚ â”‚ ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆåã¾ãŸã¯ãƒ¢ãƒ‡ãƒ«å                      â”‚ â”‚
â”‚ â”‚                                                     â”‚ â”‚
â”‚ â”‚ Max Tokens: 2000    Temperature: 0.7                â”‚ â”‚
â”‚ â”‚                                                     â”‚ â”‚
â”‚ â”‚ â˜‘ æœ‰åŠ¹åŒ–                                            â”‚ â”‚
â”‚ â”‚ â˜‘ ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼                            â”‚ â”‚
â”‚ â”‚ â˜‘ ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆæƒ…å ±å……å®ŸåŒ–ã«ä½¿ç”¨                      â”‚ â”‚
â”‚ â”‚ â˜ ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç”Ÿæˆã«ä½¿ç”¨                            â”‚ â”‚
â”‚ â”‚                                                     â”‚ â”‚
â”‚ â”‚ [ã‚­ãƒ£ãƒ³ã‚»ãƒ«]  [ä¿å­˜]                                â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                         â”‚
â”‚ â–¼ ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼åˆ¥å¿…é ˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰                          â”‚
â”‚   Azure OpenAI:                                        â”‚
â”‚   - endpoint (å¿…é ˆ)                                    â”‚
â”‚   - api_version (å¿…é ˆ)                                 â”‚
â”‚   - deployment_name (ã‚ªãƒ—ã‚·ãƒ§ãƒ³)                       â”‚
â”‚                                                         â”‚
â”‚   OpenAI:                                              â”‚
â”‚   - organization_id (ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã€è¤‡æ•°çµ„ç¹”æ‰€å±æ™‚)       â”‚
â”‚                                                         â”‚
â”‚   Anthropic (Claude):                                  â”‚
â”‚   - api_keyã®ã¿ã§ä½¿ç”¨å¯èƒ½                              â”‚
â”‚                                                         â”‚
â”‚   Google Gemini:                                       â”‚
â”‚   - api_keyã®ã¿ã§ä½¿ç”¨å¯èƒ½                              â”‚
â”‚                                                         â”‚
â”‚ â–¼ æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³                                          â”‚
â”‚   â— Bing Search API                                    â”‚
â”‚   â—‹ Google Custom Search                              â”‚
â”‚                                                         â”‚
â”‚   APIã‚­ãƒ¼                                               â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚   â”‚ ****************************************         â”‚â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                         â”‚
â”‚ â–¼ è‡ªå‹•å…¥åŠ›è¨­å®š                                          â”‚
â”‚   â˜‘ AIè‡ªå‹•å…¥åŠ›ã‚’æœ‰åŠ¹åŒ–                                  â”‚
â”‚   â˜‘ å–å¾—å‰ã«ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚’è¡¨ç¤º                        â”‚
â”‚   â˜ æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã®ä¸Šæ›¸ãã‚’è¨±å¯                            â”‚
â”‚                                                         â”‚
â”‚   ä¿¡é ¼åº¦ã—ãã„å€¤: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 70%             â”‚
â”‚                                                         â”‚
â”‚ [æ¥ç¶šãƒ†ã‚¹ãƒˆ]  [ä¿å­˜]                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            </div>

            <h3>3. è¨­å®šãƒ¡ãƒ‹ãƒ¥ãƒ¼æ§‹æˆ</h3>
            <div class="ui-mockup">
è¨­å®š
â”œâ”€â”€ ğŸ“ ãƒã‚¹ã‚¿ç®¡ç†
â”‚   â”œâ”€â”€ ğŸ‘¥ ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†
â”‚   â”œâ”€â”€ ğŸ¢ ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆç®¡ç†
â”‚   â””â”€â”€ ğŸ“„ å¥‘ç´„ç®¡ç† â­ NEW
â”œâ”€â”€ âš™ï¸ ã‚·ã‚¹ãƒ†ãƒ è¨­å®š
â”‚   â”œâ”€â”€ ğŸ” èªè¨¼ãƒ»ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
â”‚   â”œâ”€â”€ ğŸ”” é€šçŸ¥è¨­å®š
â”‚   â”œâ”€â”€ ğŸ¨ å¤–è¦³ãƒ»ãƒ†ãƒ¼ãƒ
â”‚   â””â”€â”€ ğŸ¤– AIè¨­å®š â­ NEW
â”œâ”€â”€ ğŸ”— çµ±åˆè¨­å®š
â”‚   â”œâ”€â”€ â˜ï¸ Dataverseæ¥ç¶š
â”‚   â””â”€â”€ ğŸ”Œ APIè¨­å®š
â””â”€â”€ ğŸ“‹ ãã®ä»–
    â”œâ”€â”€ ğŸ“Š ã‚·ã‚¹ãƒ†ãƒ ãƒ­ã‚°
    â””â”€â”€ â„¹ï¸ ãƒãƒ¼ã‚¸ãƒ§ãƒ³æƒ…å ±
            </div>
        </section>

        <!-- æŠ€è¡“å®Ÿè£… -->
        <section class="section">
            <h2><span class="emoji">âš™ï¸</span>æŠ€è¡“å®Ÿè£…</h2>

            <h3>1. ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ</h3>
            <div class="architecture-diagram">
<pre>
musubisuite_back/
â”œâ”€â”€ ai_services/          â­ NEW - å…¨ã‚·ã‚¹ãƒ†ãƒ å…±é€šAIæ©Ÿèƒ½
â”‚   â”œâ”€â”€ __init__.py       # ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆï¼ˆAIClient, get_default_ai_clientç­‰ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆï¼‰
â”‚   â”œâ”€â”€ llm_client.py     # AIClientçµ±åˆã‚¯ãƒ©ã‚¹ï¼ˆå…¨ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼å¯¾å¿œï¼‰
â”‚   â”œâ”€â”€ exceptions.py     # ã‚«ã‚¹ã‚¿ãƒ ä¾‹å¤–ï¼ˆAIServiceError, ProviderNotFoundErrorç­‰ï¼‰
â”‚   â”œâ”€â”€ client_enrichment.py   # ä¼æ¥­æƒ…å ±å–å¾—ã‚µãƒ¼ãƒ“ã‚¹ï¼ˆllm_clientã‚’åˆ©ç”¨ï¼‰
â”‚   â”œâ”€â”€ search_client.py        # æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³çµ±åˆ
â”‚   â””â”€â”€ prompts.py              # ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
â”œâ”€â”€ ai_settings/          â­ NEW - AIè¨­å®šç®¡ç†ã‚¢ãƒ—ãƒª
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ models.py         # AIProvider, SearchEngineConfig, AISettings
â”‚   â”œâ”€â”€ serializers.py    # AIProviderSerializerç­‰
â”‚   â”œâ”€â”€ views.py          # AIè¨­å®šAPIï¼ˆCRUDã€æ¥ç¶šãƒ†ã‚¹ãƒˆã€ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ãƒ†ã‚¹ãƒˆï¼‰
â”‚   â”œâ”€â”€ admin.py          # Djangoç®¡ç†ç”»é¢è¨­å®š
â”‚   â””â”€â”€ migrations/
â”œâ”€â”€ clients/
â”‚   â”œâ”€â”€ models.py               # â† æ‹¡å¼µï¼ˆAIé–¢é€£ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰è¿½åŠ ï¼‰
â”‚   â”œâ”€â”€ serializers.py          # â† æ‹¡å¼µ
â”‚   â”œâ”€â”€ views.py                # â† AI APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆè¿½åŠ 
â”‚   â””â”€â”€ migrations/
â”œâ”€â”€ contracts/            â­ NEW
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ models.py
â”‚   â”œâ”€â”€ serializers.py
â”‚   â”œâ”€â”€ views.py
â”‚   â””â”€â”€ migrations/
â””â”€â”€ documents/            # å°†æ¥ã®æ‹¡å¼µ: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç”Ÿæˆã§ã‚‚ai_servicesã‚’åˆ©ç”¨
    â”œâ”€â”€ views.py          # from ai_services import get_default_ai_client
    â””â”€â”€ ...
</pre>
            </div>

            <h3>1.1 ai_services ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®è²¬å‹™</h3>
            <div class="info-box">
                <h4>ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æ§‹æˆ</h4>
                <table>
                    <thead>
                        <tr>
                            <th>ãƒ•ã‚¡ã‚¤ãƒ«</th>
                            <th>è²¬å‹™</th>
                            <th>ä¸»è¦ã‚¯ãƒ©ã‚¹/é–¢æ•°</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>__init__.py</code></td>
                            <td>çµ±ä¸€ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ</td>
                            <td>AIClient, get_default_ai_client, get_ai_client, ä¾‹å¤–ã‚¯ãƒ©ã‚¹</td>
                        </tr>
                        <tr>
                            <td><code>llm_client.py</code></td>
                            <td>AI SDKçµ±åˆãƒ»ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°</td>
                            <td>AIClient, _stream_azure_openai, _stream_openai, _stream_anthropic, _stream_google</td>
                        </tr>
                        <tr>
                            <td><code>exceptions.py</code></td>
                            <td>ã‚«ã‚¹ã‚¿ãƒ ä¾‹å¤–å®šç¾©</td>
                            <td>AIServiceError, ProviderNotFoundError, APIKeyNotConfiguredError, APICallError</td>
                        </tr>
                        <tr>
                            <td><code>client_enrichment.py</code></td>
                            <td>ä¼æ¥­æƒ…å ±å–å¾—ãƒ­ã‚¸ãƒƒã‚¯</td>
                            <td>ClientEnrichmentServiceï¼ˆllm_clientã‚’åˆ©ç”¨ï¼‰</td>
                        </tr>
                        <tr>
                            <td><code>search_client.py</code></td>
                            <td>æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³çµ±åˆ</td>
                            <td>SearchClientï¼ˆBing/Google APIï¼‰</td>
                        </tr>
                        <tr>
                            <td><code>prompts.py</code></td>
                            <td>ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ</td>
                            <td>PROMPT_TEMPLATESè¾æ›¸</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <h3>2. Djangoãƒ¢ãƒ‡ãƒ«å®Ÿè£…ä¾‹</h3>
            <pre><code class="language-python"># clients/models.py

class Client(models.Model):
    # åŸºæœ¬æƒ…å ±
    company_name = models.CharField('ä¼šç¤¾å', max_length=200)
    legal_name = models.CharField('æ­£å¼åç§°', max_length=300, blank=True)
    email = models.EmailField('ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹')
    
    # ä¼æ¥­åŸºæœ¬æƒ…å ±ï¼ˆAIå–å¾—å¯¾è±¡ï¼‰
    representative = models.CharField('ä»£è¡¨è€…å', max_length=100, blank=True)
    established_date = models.DateField('è¨­ç«‹å¹´æœˆæ—¥', null=True, blank=True)
    capital = models.BigIntegerField('è³‡æœ¬é‡‘', null=True, blank=True)
    employee_count = models.IntegerField('å¾“æ¥­å“¡æ•°', null=True, blank=True)
    industry = models.CharField('æ¥­ç¨®', max_length=50, blank=True)
    website = models.URLField('ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆ', blank=True)
    description = models.TextField('äº‹æ¥­å†…å®¹', blank=True)
    
    # æ‰€åœ¨åœ°æƒ…å ±ï¼ˆAIå–å¾—å¯¾è±¡ï¼‰
    postal_code = models.CharField('éƒµä¾¿ç•ªå·', max_length=10, blank=True)
    prefecture = models.CharField('éƒ½é“åºœçœŒ', max_length=20, blank=True)
    city = models.CharField('å¸‚åŒºç”ºæ‘', max_length=100, blank=True)
    address = models.CharField('ç•ªåœ°ãƒ»ãƒ“ãƒ«å', max_length=300, blank=True)
    phone = models.CharField('é›»è©±ç•ªå·', max_length=50, blank=True)
    fax = models.CharField('FAXç•ªå·', max_length=50, blank=True)
    
    # æ‹…å½“è€…æƒ…å ±
    contact_name = models.CharField('æ‹…å½“è€…å', max_length=100, blank=True)
    contact_department = models.CharField('éƒ¨ç½²', max_length=100, blank=True)
    contact_position = models.CharField('å½¹è·', max_length=100, blank=True)
    contact_email = models.EmailField('æ‹…å½“è€…ãƒ¡ãƒ¼ãƒ«', blank=True)
    contact_phone = models.CharField('æ‹…å½“è€…é›»è©±', max_length=50, blank=True)
    contact_mobile = models.CharField('æ‹…å½“è€…æºå¸¯', max_length=50, blank=True)
    
    # ãƒ“ã‚¸ãƒã‚¹æƒ…å ±
    PRIORITY_CHOICES = [('A', 'A'), ('B', 'B'), ('C', 'C')]
    priority = models.CharField('å„ªå…ˆåº¦', max_length=1, choices=PRIORITY_CHOICES, blank=True)
    lead_source = models.CharField('ãƒªãƒ¼ãƒ‰å…ƒ', max_length=50, blank=True)
    assigned_sales = models.ForeignKey('members.Member', on_delete=models.SET_NULL, 
                                      null=True, blank=True, related_name='assigned_clients')
    tags = models.JSONField('ã‚¿ã‚°', default=list, blank=True)
    note = models.TextField('å‚™è€ƒ', blank=True)
    
    # AIé–¢é€£
    ai_generated = models.BooleanField('AIç”Ÿæˆ', default=False)
    ai_generated_at = models.DateTimeField('AIç”Ÿæˆæ—¥æ™‚', null=True, blank=True)
    ai_confidence_score = models.IntegerField('AIä¿¡é ¼åº¦', null=True, blank=True)
    
    # ã‚·ã‚¹ãƒ†ãƒ 
    created_at = models.DateTimeField('ä½œæˆæ—¥æ™‚', auto_now_add=True)
    updated_at = models.DateTimeField('æ›´æ–°æ—¥æ™‚', auto_now=True)
    
    class Meta:
        db_table = 'clients'
        verbose_name = 'ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ'
        ordering = ['-created_at']</code></pre>

            <h3>3. AI Services å…±é€šå®Ÿè£…</h3>

            <h4>3.1 çµ±ä¸€ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ (__init__.py)</h4>
            <pre><code class="language-python"># ai_services/__init__.py

"""
AI Services Package

å…¨ã‚·ã‚¹ãƒ†ãƒ ã§å…±é€šåˆ©ç”¨ã™ã‚‹AIæ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™ã€‚

ç°¡å˜ãªä½¿ã„æ–¹:
    from ai_services import get_default_ai_client, AIClient
    
    # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆAIãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚’ä½¿ç”¨
    client = get_default_ai_client()
    response = client.generate("ã“ã‚“ã«ã¡ã¯")
    
    # ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ç”Ÿæˆ
    for chunk in client.generate_stream("é•·ã„æ–‡ç« ã‚’ç”Ÿæˆ"):
        print(chunk, end='')

Author: é–‹ç™ºãƒãƒ¼ãƒ 
Created: 2025-11-16
"""

__version__ = '1.0.0'

from .llm_client import AIClient, get_default_ai_client, get_ai_client
from .exceptions import (
    AIServiceError,
    ProviderNotFoundError,
    APIKeyNotConfiguredError,
    APICallError
)

__all__ = [
    'AIClient',
    'get_default_ai_client',
    'get_ai_client',
    'AIServiceError',
    'ProviderNotFoundError',
    'APIKeyNotConfiguredError',
    'APICallError',
]</code></pre>

            <h4>3.2 AIClientçµ±åˆã‚¯ãƒ©ã‚¹ (llm_client.py)</h4>
            <pre><code class="language-python"># ai_services/llm_client.py

import logging
from typing import Generator, Optional
from .exceptions import (
    ProviderNotFoundError,
    APIKeyNotConfiguredError,
    APICallError
)

logger = logging.getLogger(__name__)


class AIClient:
    """çµ±ä¸€ã•ã‚ŒãŸAIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ"""
    
    def __init__(self, provider=None):
        """
        Args:
            provider: AIProviderã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ï¼ˆNoneã®å ´åˆã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šã‚’ä½¿ç”¨ï¼‰
        """
        if provider is None:
            from ai_settings.models import AIProvider
            provider = AIProvider.objects.filter(
                is_active=True,
                is_default=True
            ).first()
            
            if not provider:
                raise ProviderNotFoundError(
                    "ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®AIãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“"
                )
        
        self.provider = provider
        self.api_key = provider.get_api_key()
        
        if not self.api_key:
            raise APIKeyNotConfiguredError(
                f"ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ '{provider.name}' ã®APIã‚­ãƒ¼ãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“"
            )
    
    def generate(self, prompt: str, **kwargs) -> str:
        """
        ãƒ†ã‚­ã‚¹ãƒˆã‚’ç”Ÿæˆï¼ˆåŒæœŸå‡¦ç†ï¼‰
        
        Args:
            prompt: å…¥åŠ›ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
            **kwargs: è¿½åŠ ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼ˆmax_tokens, temperatureãªã©ï¼‰
        
        Returns:
            ç”Ÿæˆã•ã‚ŒãŸãƒ†ã‚­ã‚¹ãƒˆ
        """
        full_response = ""
        for chunk in self.generate_stream(prompt, **kwargs):
            full_response += chunk
        return full_response
    
    def generate_stream(self, prompt: str, **kwargs) -> Generator[str, None, None]:
        """
        ãƒ†ã‚­ã‚¹ãƒˆã‚’ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ç”Ÿæˆ
        
        Args:
            prompt: å…¥åŠ›ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
        
        Yields:
            ç”Ÿæˆã•ã‚ŒãŸãƒ†ã‚­ã‚¹ãƒˆã®ãƒãƒ£ãƒ³ã‚¯
        """
        max_tokens = kwargs.get('max_tokens', self.provider.max_tokens)
        temperature = kwargs.get('temperature', self.provider.temperature)
        
        # ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚¿ã‚¤ãƒ—ã«å¿œã˜ã¦å‡¦ç†ã‚’åˆ†å²
        if self.provider.provider_type == 'azure_openai':
            yield from self._stream_azure_openai(prompt, max_tokens, temperature)
        elif self.provider.provider_type == 'openai':
            yield from self._stream_openai(prompt, max_tokens, temperature)
        elif self.provider.provider_type == 'anthropic':
            yield from self._stream_anthropic(prompt, max_tokens, temperature)
        elif self.provider.provider_type == 'google':
            yield from self._stream_google(prompt, max_tokens, temperature)
        else:
            raise APICallError(f"æœªå¯¾å¿œãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼: {self.provider.provider_type}")
    
    def _stream_azure_openai(self, prompt, max_tokens, temperature):
        """Azure OpenAI ã§ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ç”Ÿæˆ"""
        from openai import AzureOpenAI
        client = AzureOpenAI(
            api_key=self.api_key,
            api_version=self.provider.api_version,
            azure_endpoint=self.provider.endpoint
        )
        stream = client.chat.completions.create(
            model=self.provider.deployment_name or self.provider.model_name,
            messages=[{"role": "user", "content": prompt}],
            max_tokens=max_tokens,
            temperature=temperature,
            stream=True
        )
        for chunk in stream:
            if chunk.choices[0].delta.content:
                yield chunk.choices[0].delta.content
    
    def _stream_google(self, prompt, max_tokens, temperature):
        """Google Gemini ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ï¼ˆå…¬å¼SDKï¼‰"""
        from google import genai
        
        client = genai.Client(api_key=self.api_key)
        response = client.models.generate_content_stream(
            model=self.provider.model_name,
            contents=[prompt],
            config={'max_output_tokens': max_tokens, 'temperature': temperature}
        )
        
        for chunk in response:
            if chunk.text:
                yield chunk.text
    
    # ä»–ã®ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚‚åŒæ§˜ã«å®Ÿè£…...


def get_default_ai_client() -> AIClient:
    """ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®AIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’å–å¾—"""
    return AIClient(provider=None)


def get_ai_client(provider_id: Optional[int] = None,
                  provider_name: Optional[str] = None) -> AIClient:
    """æŒ‡å®šã•ã‚ŒãŸAIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’å–å¾—"""
    from ai_settings.models import AIProvider
    
    if provider_id is not None:
        provider = AIProvider.objects.get(id=provider_id, is_active=True)
    elif provider_name is not None:
        provider = AIProvider.objects.get(name=provider_name, is_active=True)
    else:
        raise ValueError("provider_id ã¾ãŸã¯ provider_name ã‚’æŒ‡å®šã—ã¦ãã ã•ã„")
    
    return AIClient(provider=provider)</code></pre>

            <h4>3.3 ä¼æ¥­æƒ…å ±å–å¾—ã‚µãƒ¼ãƒ“ã‚¹ (client_enrichment.py)</h4>
            <pre><code class="language-python"># ai_services/client_enrichment.py

from ai_services import get_default_ai_client, AIClient


class ClientEnrichmentService:
    """ä¼æ¥­æƒ…å ±å–å¾—ã‚µãƒ¼ãƒ“ã‚¹ï¼ˆAIå…±é€šæ©Ÿèƒ½ã‚’åˆ©ç”¨ï¼‰"""
    
    def __init__(self, provider_name: Optional[str] = None):
        """
        Args:
            provider_name: ä½¿ç”¨ã™ã‚‹ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼åï¼ˆçœç•¥æ™‚ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰
        """
        if provider_name:
            from ai_services import get_ai_client
            self.ai_client = get_ai_client(provider_name=provider_name)
        else:
            self.ai_client = get_default_ai_client()
    
    def fetch_company_info(self, company_name: str) -> dict:
        """ä¼æ¥­åã‹ã‚‰ä¼æ¥­æƒ…å ±ã‚’å–å¾—"""
        
        # ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆ
        prompt = f"""
ä»¥ä¸‹ã®ä¼æ¥­ã®æƒ…å ±ã‚’èª¿æŸ»ã—ã€JSONå½¢å¼ã§è¿”ã—ã¦ãã ã•ã„ã€‚

ä¼æ¥­å: {company_name}

å¿…è¦ãªæƒ…å ±:
- æ­£å¼åç§°
- ä»£è¡¨è€…å
- è¨­ç«‹å¹´æœˆæ—¥
- è³‡æœ¬é‡‘
- å¾“æ¥­å“¡æ•°
- æ¥­ç¨®
- æ‰€åœ¨åœ°ï¼ˆéƒµä¾¿ç•ªå·ã€éƒ½é“åºœçœŒã€å¸‚åŒºç”ºæ‘ã€ç•ªåœ°ï¼‰
- é›»è©±ç•ªå·
- ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆ
- äº‹æ¥­å†…å®¹

JSONå½¢å¼:
{{
  "legal_name": "...",
  "representative": "...",
  ...
}}
"""
        
        # AIå…±é€šæ©Ÿèƒ½ã‚’ä½¿ç”¨ã—ã¦ç”Ÿæˆ
        response = self.ai_client.generate(prompt)
        
        # JSONãƒ‘ãƒ¼ã‚¹ãƒ»ä¿¡é ¼åº¦è¨ˆç®—ç­‰
        structured_data = self._parse_response(response)
        confidence_score = self._calculate_confidence(structured_data)
        
        return {
            "data": structured_data,
            "confidence_score": confidence_score,
            "generated_at": timezone.now().isoformat()
        }</code></pre>

            <h4>3.4 ä½¿ç”¨ä¾‹: å„æ©Ÿèƒ½ã‹ã‚‰ã®å‘¼ã³å‡ºã—</h4>
            
            <h5>ãƒ‘ã‚¿ãƒ¼ãƒ³1: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚’ä½¿ç”¨ï¼ˆæœ€ã‚‚ã‚·ãƒ³ãƒ—ãƒ«ï¼‰</h5>
            <pre><code class="language-python"># clients/views.py - ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆæƒ…å ±å–å¾—æ©Ÿèƒ½

from rest_framework.decorators import action
from rest_framework.response import Response
from ai_services import get_default_ai_client
import json

@action(detail=False, methods=['post'])
def ai_fetch(self, request):
    """AIã§ä¼æ¥­æƒ…å ±ã‚’å–å¾—"""
    company_name = request.data.get('company_name')
    
    # 3è¡Œã§AIæ©Ÿèƒ½ã‚’åˆ©ç”¨
    client = get_default_ai_client()
    prompt = self._build_company_info_prompt(company_name)
    response = client.generate(prompt)
    
    # ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’ãƒ‘ãƒ¼ã‚¹
    try:
        company_data = json.loads(response)
        return Response({
            'success': True,
            'data': company_data,
            'confidence_score': 85
        })
    except json.JSONDecodeError:
        return Response({
            'success': False,
            'error': 'AIãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®è§£æã«å¤±æ•—ã—ã¾ã—ãŸ'
        }, status=400)

def _build_company_info_prompt(self, company_name: str) -> str:
    """ä¼æ¥­æƒ…å ±å–å¾—ç”¨ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ç”Ÿæˆ"""
    return f"""
ä»¥ä¸‹ã®ä¼æ¥­ã®å…¬é–‹æƒ…å ±ã‚’èª¿æŸ»ã—ã€JSONå½¢å¼ã§è¿”ã—ã¦ãã ã•ã„ã€‚

ä¼æ¥­å: {company_name}

è¿”å´ã™ã‚‹JSONå½¢å¼:
{{
  "legal_name": "æ­£å¼åç§°",
  "representative": "ä»£è¡¨è€…å",
  "established_date": "YYYY-MM-DD",
  "capital": è³‡æœ¬é‡‘(æ•°å€¤),
  "employee_count": å¾“æ¥­å“¡æ•°(æ•°å€¤),
  "industry": "æ¥­ç¨®",
  "website": "https://...",
  "description": "äº‹æ¥­å†…å®¹",
  "postal_code": "éƒµä¾¿ç•ªå·",
  "prefecture": "éƒ½é“åºœçœŒ",
  "city": "å¸‚åŒºç”ºæ‘",
  "address": "ç•ªåœ°ãƒ»ãƒ“ãƒ«å",
  "phone": "é›»è©±ç•ªå·"
}}

æ³¨æ„: å¿…ãšæœ‰åŠ¹ãªJSONã®ã¿ã‚’è¿”ã—ã¦ãã ã•ã„ã€‚èª¬æ˜æ–‡ã¯ä¸è¦ã§ã™ã€‚
"""</code></pre>

            <h5>ãƒ‘ã‚¿ãƒ¼ãƒ³2: ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ç”Ÿæˆã‚’ä½¿ç”¨ï¼ˆæœ€é©åŒ–ç‰ˆï¼‰</h5>
            <pre><code class="language-python"># documents/views.py - ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç”Ÿæˆæ©Ÿèƒ½

from django.http import StreamingHttpResponse
from ai_services import get_default_ai_client
import json

@action(detail=False, methods=['post'])
def generate_document(self, request):
    """AIã§ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ç”Ÿæˆ"""
    template_type = request.data.get('template_type')
    context_data = request.data.get('context')
    
    def stream_response():
        """ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ãƒ¬ã‚¹ãƒãƒ³ã‚¹ç”Ÿæˆï¼ˆæœ€é©åŒ–ç‰ˆï¼‰"""
        try:
            client = get_default_ai_client()
            prompt = self._build_document_prompt(template_type, context_data)
            
            # ãƒãƒ£ãƒ³ã‚¯å˜ä½ã§ç›´æ¥é€ä¿¡ï¼ˆåŠ¹ç‡çš„ï¼‰
            for chunk in client.generate_stream(prompt):
                if chunk:
                    yield f"data: {json.dumps({'content': chunk}, ensure_ascii=False)}\n\n"
            
            # å®Œäº†ã‚·ã‚°ãƒŠãƒ«
            yield f"data: {json.dumps({'done': True})}\n\n"
            
        except Exception as e:
            yield f"data: {json.dumps({'error': str(e)})}\n\n"
        except Exception as e:
            yield f"data: {json.dumps({'error': str(e)})}\n\n"
    
    response = StreamingHttpResponse(
        stream_response(),
        content_type='text/event-stream'
    )
    response['Cache-Control'] = 'no-cache'
    response['X-Accel-Buffering'] = 'no'
    return response

def _build_document_prompt(self, template_type: str, context: dict) -> str:
    """ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç”Ÿæˆç”¨ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ"""
    return f"""
{template_type}ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚

ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆæƒ…å ±:
{json.dumps(context, ensure_ascii=False, indent=2)}

è¦ä»¶:
- æ—¥æœ¬èªã§ä½œæˆ
- å½¢å¼çš„ã§ä¸å¯§ãªæ–‡ä½“
- æ®µè½ã”ã¨ã«æ”¹è¡Œ
"""</code></pre>

            <h5>ãƒ‘ã‚¿ãƒ¼ãƒ³3: ç‰¹å®šã®ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚’æŒ‡å®š</h5>
            <pre><code class="language-python"># tasks/views.py - ã‚¿ã‚¹ã‚¯ç®¡ç†æ©Ÿèƒ½

from ai_services import get_ai_client, AIServiceError
from rest_framework.decorators import action
from rest_framework.response import Response

@action(detail=True, methods=['post'])
def suggest_subtasks(self, request, pk=None):
    """ã‚¿ã‚¹ã‚¯ã®ã‚µãƒ–ã‚¿ã‚¹ã‚¯ã‚’AIã§ææ¡ˆ"""
    task = self.get_object()
    
    try:
        # Claude 3.5ã‚’ä½¿ç”¨ï¼ˆé«˜åº¦ãªæ¨è«–ãŒå¿…è¦ãªå ´åˆï¼‰
        client = get_ai_client(provider_name="Claude 3.5")
        
        prompt = f"""
ä»¥ä¸‹ã®ã‚¿ã‚¹ã‚¯ã‚’åˆ†æã—ã€å®Ÿè¡Œå¯èƒ½ãªã‚µãƒ–ã‚¿ã‚¹ã‚¯ã«åˆ†è§£ã—ã¦ãã ã•ã„ã€‚

ã‚¿ã‚¹ã‚¯å: {task.title}
èª¬æ˜: {task.description}
æœŸé™: {task.due_date}

JSONå½¢å¼ã§è¿”ã—ã¦ãã ã•ã„:
{{
  "subtasks": [
    {{
      "title": "ã‚µãƒ–ã‚¿ã‚¹ã‚¯å",
      "description": "è©³ç´°",
      "estimated_hours": æ•°å€¤,
      "order": æ•°å€¤
    }}
  ],
  "reasoning": "åˆ†è§£ã®ç†ç”±"
}}
"""
        
        response = client.generate(prompt)
        subtasks_data = json.loads(response)
        
        return Response({
            'success': True,
            'subtasks': subtasks_data['subtasks'],
            'reasoning': subtasks_data['reasoning']
        })
        
    except AIServiceError as e:
        # AIå…±é€šæ©Ÿèƒ½ã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
        return Response({
            'success': False,
            'error': f'AIå‡¦ç†ã‚¨ãƒ©ãƒ¼: {str(e)}'
        }, status=500)
    except json.JSONDecodeError:
        return Response({
            'success': False,
            'error': 'AIãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®è§£æã«å¤±æ•—'
        }, status=400)</code></pre>

            <h5>ãƒ‘ã‚¿ãƒ¼ãƒ³4: è¤‡æ•°ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯</h5>
            <pre><code class="language-python"># chat/views.py - ãƒãƒ£ãƒƒãƒˆæ©Ÿèƒ½

from ai_services import get_ai_client, ProviderNotFoundError, APICallError
from rest_framework.views import APIView
from rest_framework.response import Response

class ChatAPIView(APIView):
    """AIãƒãƒ£ãƒƒãƒˆæ©Ÿèƒ½"""
    
    def post(self, request):
        """ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡ã—ã¦AIãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’å–å¾—"""
        user_message = request.data.get('message')
        
        # ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®å„ªå…ˆé †ä½ãƒªã‚¹ãƒˆ
        providers = ['GPT-4o', 'Claude 3.5', 'Gemini 2.0']
        
        for provider_name in providers:
            try:
                client = get_ai_client(provider_name=provider_name)
                response = client.generate(
                    user_message,
                    max_tokens=2000,
                    temperature=0.7
                )
                
                return Response({
                    'success': True,
                    'message': response,
                    'provider': provider_name
                })
                
            except (ProviderNotFoundError, APICallError) as e:
                # ã“ã®ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ãŒä½¿ãˆãªã„å ´åˆã¯æ¬¡ã¸
                logger.warning(f"{provider_name}ã§å¤±æ•—: {e}")
                continue
        
        # ã™ã¹ã¦ã®ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ãŒå¤±æ•—
        return Response({
            'success': False,
            'error': 'ã™ã¹ã¦ã®AIãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ãŒåˆ©ç”¨ã§ãã¾ã›ã‚“'
        }, status=503)</code></pre>

            <h5>ãƒ‘ã‚¿ãƒ¼ãƒ³5: AIè¨­å®šæƒ…å ±ã®å–å¾—ã¨æ´»ç”¨</h5>
            <pre><code class="language-python"># ai_settings/views.py - AIè¨­å®šæ©Ÿèƒ½

from rest_framework.decorators import action
from rest_framework.response import Response
from ai_services import AIClient, get_default_ai_client

@action(detail=True, methods=['post'])
def test_prompt(self, request, pk=None):
    """ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ†ã‚¹ãƒˆï¼ˆAIè¨­å®šç”»é¢ã‹ã‚‰å‘¼ã³å‡ºã—ï¼‰"""
    provider = self.get_object()
    prompt = request.data.get('prompt', 'ã“ã‚“ã«ã¡ã¯')
    
    def stream_response():
        """ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ãƒ¬ã‚¹ãƒãƒ³ã‚¹"""
        try:
            # æŒ‡å®šã•ã‚ŒãŸãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã§AIClientã‚’åˆæœŸåŒ–
            client = AIClient(provider=provider)
            
            # ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼æƒ…å ±ã‚’ãƒ­ã‚°å‡ºåŠ›
            logger.info(f"Testing with provider: {client.info}")
            
            # ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ç”Ÿæˆ
            for chunk in client.generate_stream(prompt):
                for char in chunk:
                    yield f"data: {json.dumps({'content': char})}\n\n"
            
            yield f"data: {json.dumps({'done': True})}\n\n"
            
        except Exception as e:
            yield f"data: {json.dumps({'error': str(e)})}\n\n"
    
    return StreamingHttpResponse(
        stream_response(),
        content_type='text/event-stream'
    )

@action(detail=False, methods=['get'])
def available_providers(self, request):
    """åˆ©ç”¨å¯èƒ½ãªãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ä¸€è¦§ã‚’å–å¾—"""
    from ai_settings.models import AIProvider
    
    providers = AIProvider.objects.filter(is_active=True)
    
    return Response({
        'providers': [
            {
                'id': p.id,
                'name': p.name,
                'provider_type': p.provider_type,
                'model_name': p.model_name,
                'is_default': p.is_default,
                'max_tokens': p.max_tokens,
                'temperature': p.temperature
            }
            for p in providers
        ]
    })</code></pre>

            <h5>ãƒ‘ã‚¿ãƒ¼ãƒ³6: ãƒãƒƒãƒå‡¦ç†ã§ã®åˆ©ç”¨</h5>
            <pre><code class="language-python"># management/commands/enrich_clients.py - ãƒãƒƒãƒå‡¦ç†

from django.core.management.base import BaseCommand
from ai_services import get_default_ai_client
from clients.models import Client
import json

class Command(BaseCommand):
    help = 'ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆæƒ…å ±ã‚’AIã§ä¸€æ‹¬æ›´æ–°'
    
    def handle(self, *args, **options):
        """ãƒãƒƒãƒå‡¦ç†å®Ÿè¡Œ"""
        # AIå…±é€šæ©Ÿèƒ½ã‚’åˆæœŸåŒ–
        client = get_default_ai_client()
        
        # æƒ…å ±ãŒä¸å®Œå…¨ãªã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’å–å¾—
        clients = Client.objects.filter(
            description='',
            industry=''
        )[:10]  # æœ€åˆã®10ä»¶
        
        self.stdout.write(f'{clients.count()}ä»¶ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’æ›´æ–°ã—ã¾ã™...')
        
        for idx, client_obj in enumerate(clients, 1):
            try:
                self.stdout.write(f'[{idx}/{clients.count()}] {client_obj.company_name}')
                
                # AIå…±é€šæ©Ÿèƒ½ã§ä¼æ¥­æƒ…å ±ã‚’å–å¾—
                prompt = f"""
{client_obj.company_name}ã®ä»¥ä¸‹ã®æƒ…å ±ã‚’JSONå½¢å¼ã§è¿”ã—ã¦ãã ã•ã„:
- industry: æ¥­ç¨®
- description: äº‹æ¥­å†…å®¹ï¼ˆ100æ–‡å­—ç¨‹åº¦ï¼‰
                """
                
                response = client.generate(prompt)
                data = json.loads(response)
                
                # æ›´æ–°
                client_obj.industry = data.get('industry', '')
                client_obj.description = data.get('description', '')
                client_obj.ai_generated = True
                client_obj.save()
                
                self.stdout.write(self.style.SUCCESS('  âœ“ æ›´æ–°å®Œäº†'))
                
            except Exception as e:
                self.stdout.write(
                    self.style.ERROR(f'  âœ— ã‚¨ãƒ©ãƒ¼: {str(e)}')
                )
                continue
        
        self.stdout.write(self.style.SUCCESS('ãƒãƒƒãƒå‡¦ç†å®Œäº†'))</code></pre>

            <div class="info-box">
                <h4>ğŸ’¡ ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹</h4>
                <ul>
                    <li><strong>ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚’å„ªå…ˆ:</strong> ç‰¹åˆ¥ãªç†ç”±ãŒãªã„é™ã‚Š <code>get_default_ai_client()</code> ã‚’ä½¿ç”¨</li>
                    <li><strong>ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°:</strong> <code>AIServiceError</code> ç³»ã®ä¾‹å¤–ã‚’é©åˆ‡ã«ã‚­ãƒ£ãƒƒãƒ</li>
                    <li><strong>ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ã®æ´»ç”¨:</strong> é•·æ–‡ç”Ÿæˆæ™‚ã¯ <code>generate_stream()</code> ã§UXå‘ä¸Š</li>
                    <li><strong>ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¨­è¨ˆ:</strong> æ˜ç¢ºãªæŒ‡ç¤ºã¨æœŸå¾…ã™ã‚‹å‡ºåŠ›å½¢å¼ã‚’æŒ‡å®š</li>
                    <li><strong>ãƒ¬ãƒ¼ãƒˆåˆ¶é™è€ƒæ…®:</strong> ãƒãƒƒãƒå‡¦ç†ã§ã¯é©åˆ‡ãªå¾…æ©Ÿæ™‚é–“ã‚’è¨­å®š</li>
                    <li><strong>ãƒ­ã‚°è¨˜éŒ²:</strong> AIå‘¼ã³å‡ºã—ã®ãƒ­ã‚°ã‚’æ®‹ã—ã¦å•é¡Œè¿½è·¡ã‚’å®¹æ˜“ã«</li>
                </ul>
            </div>
        </section>

        <!-- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è€ƒæ…®äº‹é … -->
        <section class="section">
            <h2><span class="emoji">ğŸ”’</span>ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è€ƒæ…®äº‹é …</h2>

            <div class="highlight">
                <h3>é‡è¦ãªæ³¨æ„äº‹é …</h3>
                <ul>
                    <li><strong>APIã‚­ãƒ¼ã®ç®¡ç†:</strong> ç’°å¢ƒå¤‰æ•°ã‚„Secrets Managerã§å®‰å…¨ã«ç®¡ç†</li>
                    <li><strong>ãƒ¬ãƒ¼ãƒˆåˆ¶é™:</strong> APIå‘¼ã³å‡ºã—å›æ•°ã®åˆ¶é™å®Ÿè£…</li>
                    <li><strong>ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼:</strong> AIå–å¾—ãƒ‡ãƒ¼ã‚¿ã¯å¿…ãšãƒ¦ãƒ¼ã‚¶ãƒ¼ç¢ºèªã‚’çµŒã¦ã‹ã‚‰ä¿å­˜</li>
                    <li><strong>ç›£æŸ»ãƒ­ã‚°:</strong> AIæ©Ÿèƒ½ã®ä½¿ç”¨å±¥æ­´ã‚’è¨˜éŒ²</li>
                    <li><strong>æ¨©é™ç®¡ç†:</strong> AIæ©Ÿèƒ½ã®ä½¿ç”¨æ¨©é™ã‚’é©åˆ‡ã«è¨­å®š</li>
                </ul>
            </div>
        </section>

        <!-- å®Ÿè£…ãƒ•ã‚§ãƒ¼ã‚º -->
        <section class="section">
            <h2><span class="emoji">ğŸ“…</span>å®Ÿè£…ãƒ•ã‚§ãƒ¼ã‚º</h2>

            <h3>ãƒ•ã‚§ãƒ¼ã‚º1: ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«æ‹¡å¼µ</h3>
            <ol>
                <li>Clientãƒ¢ãƒ‡ãƒ«ã®æ‹¡å¼µï¼ˆæ–°è¦ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰è¿½åŠ ï¼‰</li>
                <li>Contractãƒ¢ãƒ‡ãƒ«ã®æ–°è¦ä½œæˆ</li>
                <li>ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ</li>
                <li>Serializeræ›´æ–°</li>
            </ol>

            <h3>ãƒ•ã‚§ãƒ¼ã‚º2: AIå…±é€šåŸºç›¤å®Ÿè£…</h3>
            <ol>
                <li><strong>ai_servicesãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ä½œæˆ</strong>
                    <ul>
                        <li>__init__.py: ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆå®Ÿè£…</li>
                        <li>exceptions.py: ã‚«ã‚¹ã‚¿ãƒ ä¾‹å¤–å®šç¾©</li>
                        <li>llm_client.py: AIClientçµ±åˆã‚¯ãƒ©ã‚¹å®Ÿè£…</li>
                    </ul>
                </li>
                <li><strong>å…¨ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼å¯¾å¿œ</strong>
                    <ul>
                        <li>_stream_azure_openai(): Azure OpenAIçµ±åˆ</li>
                        <li>_stream_openai(): OpenAIçµ±åˆ</li>
                        <li>_stream_anthropic(): Anthropic Claudeçµ±åˆ</li>
                        <li>_stream_google(): Google Geminiçµ±åˆ</li>
                    </ul>
                </li>
                <li><strong>ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°å®Ÿè£…</strong>
                    <ul>
                        <li>get_default_ai_client(): ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼å–å¾—</li>
                        <li>get_ai_client(id/name): æŒ‡å®šãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼å–å¾—</li>
                    </ul>
                </li>
                <li><strong>AIè¨­å®šç®¡ç†å®Ÿè£…</strong>
                    <ul>
                        <li>ai_settings ã‚¢ãƒ—ãƒªä½œæˆ</li>
                        <li>AIProvider, SearchEngineConfig, AISettings ãƒ¢ãƒ‡ãƒ«</li>
                        <li>APIã‚­ãƒ¼æš—å·åŒ–ãƒ»å¾©å·åŒ–æ©Ÿèƒ½</li>
                        <li>æ¥ç¶šãƒ†ã‚¹ãƒˆãƒ»ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ãƒ†ã‚¹ãƒˆæ©Ÿèƒ½</li>
                    </ul>
                </li>
                <li><strong>å˜ä½“ãƒ†ã‚¹ãƒˆä½œæˆ</strong>
                    <ul>
                        <li>AIClientã®ãƒ†ã‚¹ãƒˆ</li>
                        <li>å„ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼çµ±åˆã®ãƒ†ã‚¹ãƒˆ</li>
                        <li>ä¾‹å¤–å‡¦ç†ã®ãƒ†ã‚¹ãƒˆ</li>
                    </ul>
                </li>
            </ol>

            <h3>ãƒ•ã‚§ãƒ¼ã‚º2.1: æ©Ÿèƒ½åˆ¥AI Serviceå®Ÿè£…</h3>
            <ol>
                <li>ClientEnrichmentServiceå®Ÿè£…ï¼ˆai_clientã‚’åˆ©ç”¨ï¼‰</li>
                <li>SearchClientå®Ÿè£…ï¼ˆBing/Googleçµ±åˆï¼‰</li>
                <li>ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆä½œæˆ</li>
            </ol>

            <h3>ãƒ•ã‚§ãƒ¼ã‚º3: APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆå®Ÿè£…</h3>
            <ol>
                <li>POST /api/clients/ai-fetch/ å®Ÿè£…</li>
                <li>POST /api/clients/{id}/ai-refresh/ å®Ÿè£…</li>
                <li>AIè¨­å®šAPIå®Ÿè£…</li>
                <li>å˜ä½“ãƒ†ã‚¹ãƒˆä½œæˆ</li>
            </ol>

            <h3>ãƒ•ã‚§ãƒ¼ã‚º4: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£…</h3>
            <ol>
                <li>AIè¨­å®šç”»é¢ã®ä½œæˆ</li>
                <li>ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆä½œæˆãƒ•ã‚©ãƒ¼ãƒ ã®AIæ©Ÿèƒ½çµ±åˆ</li>
                <li>å·®åˆ†è¡¨ç¤ºUIå®Ÿè£…</li>
                <li>ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°</li>
            </ol>

            <h3>ãƒ•ã‚§ãƒ¼ã‚º5: ãƒ†ã‚¹ãƒˆãƒ»ãƒªãƒªãƒ¼ã‚¹</h3>
            <ol>
                <li>çµ±åˆãƒ†ã‚¹ãƒˆ</li>
                <li>ãƒ¦ãƒ¼ã‚¶ãƒ¼å—ã‘å…¥ã‚Œãƒ†ã‚¹ãƒˆ</li>
                <li>æœ¬ç•ªç’°å¢ƒãƒ‡ãƒ—ãƒ­ã‚¤</li>
                <li>ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´å‚™</li>
            </ol>
        </section>

        <!-- AIãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼åˆ¥å®Ÿè£…ä»•æ§˜ -->
        <section class="section">
            <h2><span class="emoji">ğŸ”Œ</span>AIãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼åˆ¥å®Ÿè£…ä»•æ§˜</h2>

            <h3>1. å…±é€šåŒ–æˆ¦ç•¥</h3>
            <p>å„AIãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®APIä»•æ§˜ã‚’èª¿æŸ»ã—ã€ä»¥ä¸‹ã®å…±é€šåŒ–æˆ¦ç•¥ã‚’æ¡ç”¨ã—ã¦ã„ã¾ã™:</p>
            
            <h4>å…±é€šãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰</h4>
            <ul>
                <li><code>name</code>: è¨­å®šåï¼ˆè­˜åˆ¥ç”¨ï¼‰</li>
                <li><code>provider_type</code>: ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚¿ã‚¤ãƒ—</li>
                <li><code>api_key</code>: APIã‚­ãƒ¼ï¼ˆæš—å·åŒ–ä¿å­˜ï¼‰</li>
                <li><code>model_name</code>: ãƒ¢ãƒ‡ãƒ«å</li>
                <li><code>max_tokens</code>: æœ€å¤§ãƒˆãƒ¼ã‚¯ãƒ³æ•°</li>
                <li><code>temperature</code>: æ¸©åº¦ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼ˆ0.0-2.0ï¼‰</li>
                <li><code>is_active</code>: æœ‰åŠ¹ãƒ•ãƒ©ã‚°</li>
                <li><code>is_default</code>: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ•ãƒ©ã‚°</li>
                <li><code>use_for_client_enrichment</code>: ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆæƒ…å ±å–å¾—ç”¨é€”</li>
                <li><code>use_for_document_generation</code>: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç”Ÿæˆç”¨é€”</li>
            </ul>

            <h4>ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼å›ºæœ‰ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰</h4>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼</th>
                            <th>å›ºæœ‰ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰</th>
                            <th>å¿…é ˆ/ä»»æ„</th>
                            <th>èª¬æ˜</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td rowspan="3"><strong>Azure OpenAI</strong></td>
                            <td><code>endpoint</code></td>
                            <td class="required">å¿…é ˆ</td>
                            <td>Azure OpenAIãƒªã‚½ãƒ¼ã‚¹ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆURL<br>ä¾‹: https://your-resource.openai.azure.com/</td>
                        </tr>
                        <tr>
                            <td><code>api_version</code></td>
                            <td class="required">å¿…é ˆ</td>
                            <td>APIãƒãƒ¼ã‚¸ãƒ§ãƒ³<br>ä¾‹: 2024-02-01, 2024-08-01-preview</td>
                        </tr>
                        <tr>
                            <td><code>deployment_name</code></td>
                            <td>ä»»æ„</td>
                            <td>ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆåï¼ˆæŒ‡å®šã—ãªã„å ´åˆã¯model_nameã‚’ä½¿ç”¨ï¼‰</td>
                        </tr>
                        <tr>
                            <td><strong>OpenAI</strong></td>
                            <td><code>organization_id</code></td>
                            <td>ä»»æ„</td>
                            <td>çµ„ç¹”IDï¼ˆè¤‡æ•°çµ„ç¹”ã«æ‰€å±ã—ã¦ã„ã‚‹å ´åˆã«æŒ‡å®šï¼‰</td>
                        </tr>
                        <tr>
                            <td><strong>Anthropic (Claude)</strong></td>
                            <td>-</td>
                            <td>-</td>
                            <td>å…±é€šãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ã¿ã§ä½¿ç”¨å¯èƒ½</td>
                        </tr>
                        <tr>
                            <td><strong>Google Gemini</strong></td>
                            <td>-</td>
                            <td>-</td>
                            <td>å…±é€šãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ã¿ã§ä½¿ç”¨å¯èƒ½</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <h3>2. ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼åˆ¥èªè¨¼ä»•æ§˜</h3>

            <h4>Azure OpenAI</h4>
            <pre><code class="language-python"># Azure OpenAIèªè¨¼ä¾‹
from openai import AzureOpenAI

client = AzureOpenAI(
    api_key=provider.api_key,
    api_version=provider.api_version,  # å¿…é ˆ
    azure_endpoint=provider.endpoint   # å¿…é ˆ
)

# ãƒªã‚¯ã‚¨ã‚¹ãƒˆä¾‹
response = client.chat.completions.create(
    model=provider.deployment_name or provider.model_name,
    messages=[{"role": "user", "content": "Hello"}],
    max_tokens=provider.max_tokens,
    temperature=provider.temperature
)</code></pre>

            <h4>OpenAI</h4>
            <pre><code class="language-python"># OpenAIèªè¨¼ä¾‹
from openai import OpenAI

client = OpenAI(
    api_key=provider.api_key,
    organization=provider.organization_id  # ä»»æ„
)

# ãƒªã‚¯ã‚¨ã‚¹ãƒˆä¾‹
response = client.chat.completions.create(
    model=provider.model_name,
    messages=[{"role": "user", "content": "Hello"}],
    max_tokens=provider.max_tokens,
    temperature=provider.temperature
)</code></pre>

            <h4>Anthropic (Claude)</h4>
            <pre><code class="language-python"># Anthropicèªè¨¼ä¾‹
import anthropic

client = anthropic.Anthropic(
    api_key=provider.api_key
)

# ãƒªã‚¯ã‚¨ã‚¹ãƒˆä¾‹
response = client.messages.create(
    model=provider.model_name,
    max_tokens=provider.max_tokens,
    temperature=provider.temperature,
    messages=[{"role": "user", "content": "Hello"}]
)</code></pre>

            <h4>Google Gemini</h4>
            <pre><code class="language-python"># Google Geminièªè¨¼ä¾‹
from google import genai

client = genai.Client(api_key=provider.api_key)

# ãƒªã‚¯ã‚¨ã‚¹ãƒˆä¾‹
response = client.models.generate_content(
    model=provider.model_name,
    contents="Hello"
)</code></pre>

            <h3>3. æ¨å¥¨ãƒ¢ãƒ‡ãƒ«ä¸€è¦§</h3>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼</th>
                            <th>æ¨å¥¨ãƒ¢ãƒ‡ãƒ«</th>
                            <th>ç”¨é€”</th>
                            <th>ç‰¹å¾´</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td rowspan="2"><strong>Azure OpenAI</strong></td>
                            <td><code>gpt-4o</code></td>
                            <td>æ±ç”¨ãƒ»é«˜å“è³ª</td>
                            <td>æœ€æ–°GPT-4ãƒ¢ãƒ‡ãƒ«ã€ãƒãƒ«ãƒãƒ¢ãƒ¼ãƒ€ãƒ«å¯¾å¿œ</td>
                        </tr>
                        <tr>
                            <td><code>gpt-4o-mini</code></td>
                            <td>ã‚³ã‚¹ãƒˆé‡è¦–</td>
                            <td>è»½é‡ç‰ˆã€å‡¦ç†é€Ÿåº¦ãŒé€Ÿã„</td>
                        </tr>
                        <tr>
                            <td rowspan="2"><strong>OpenAI</strong></td>
                            <td><code>gpt-4o</code></td>
                            <td>æ±ç”¨ãƒ»é«˜å“è³ª</td>
                            <td>æœ€æ–°GPT-4ãƒ¢ãƒ‡ãƒ«</td>
                        </tr>
                        <tr>
                            <td><code>gpt-3.5-turbo</code></td>
                            <td>ã‚³ã‚¹ãƒˆé‡è¦–</td>
                            <td>é«˜é€Ÿãƒ»ä½ã‚³ã‚¹ãƒˆ</td>
                        </tr>
                        <tr>
                            <td rowspan="2"><strong>Anthropic</strong></td>
                            <td><code>claude-3-5-sonnet-20241022</code></td>
                            <td>æ±ç”¨ãƒ»é«˜å“è³ª</td>
                            <td>Claude 3.5 Sonnetã€ãƒãƒ©ãƒ³ã‚¹å‹</td>
                        </tr>
                        <tr>
                            <td><code>claude-3-5-haiku-20241022</code></td>
                            <td>é«˜é€Ÿå‡¦ç†</td>
                            <td>Claude 3.5 Haikuã€æœ€é€Ÿ</td>
                        </tr>
                        <tr>
                            <td rowspan="2"><strong>Google Gemini</strong></td>
                            <td><code>gemini-2.0-flash-exp</code></td>
                            <td>æ±ç”¨ãƒ»é«˜é€Ÿ</td>
                            <td>Gemini 2.0 Flashã€å®Ÿé¨“ç‰ˆ</td>
                        </tr>
                        <tr>
                            <td><code>gemini-1.5-pro</code></td>
                            <td>é«˜å“è³ª</td>
                            <td>Gemini 1.5 Proã€é•·æ–‡å¯¾å¿œ</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <h3>4. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒ</h3>
            <pre><code class="language-python"># ai_settings/models.py - AIProvider ãƒ¢ãƒ‡ãƒ«

class AIProvider(models.Model):
    # å…±é€šãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
    name = models.CharField('è¨­å®šå', max_length=100)
    provider_type = models.CharField('ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚¿ã‚¤ãƒ—', max_length=20, 
                                    choices=PROVIDER_TYPES)
    api_key_encrypted = models.TextField('APIã‚­ãƒ¼ï¼ˆæš—å·åŒ–ï¼‰')
    model_name = models.CharField('ãƒ¢ãƒ‡ãƒ«å', max_length=100)
    max_tokens = models.IntegerField('æœ€å¤§ãƒˆãƒ¼ã‚¯ãƒ³æ•°', default=4000)
    temperature = models.FloatField('æ¸©åº¦ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿', default=0.7)
    is_active = models.BooleanField('æœ‰åŠ¹', default=True)
    is_default = models.BooleanField('ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ', default=False)
    use_for_client_enrichment = models.BooleanField(
        'ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆæƒ…å ±å–å¾—ã«ä½¿ç”¨', default=True)
    use_for_document_generation = models.BooleanField(
        'ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç”Ÿæˆã«ä½¿ç”¨', default=False)
    
    # Azure OpenAIå›ºæœ‰ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
    endpoint = models.URLField('ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ', blank=True, max_length=500)
    api_version = models.CharField('APIãƒãƒ¼ã‚¸ãƒ§ãƒ³', max_length=50, blank=True)
    deployment_name = models.CharField('ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆå', max_length=100, blank=True)
    
    # OpenAIå›ºæœ‰ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
    organization_id = models.CharField('çµ„ç¹”ID', max_length=100, blank=True)
    
    # ã‚·ã‚¹ãƒ†ãƒ 
    created_at = models.DateTimeField('ä½œæˆæ—¥æ™‚', default=timezone.now)
    updated_at = models.DateTimeField('æ›´æ–°æ—¥æ™‚', auto_now=True)</code></pre>

            <h3>5. UIå®Ÿè£…ä»•æ§˜</h3>
            <p>ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã§ã¯ã€<code>provider_type</code>ã®å€¤ã«å¿œã˜ã¦å‹•çš„ã«ãƒ•ã‚©ãƒ¼ãƒ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’è¡¨ç¤ºã—ã¾ã™:</p>
            
            <pre><code class="language-typescript">// ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚¿ã‚¤ãƒ—ã«å¿œã˜ãŸå‹•çš„ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰è¡¨ç¤º
{editingProvider.provider_type === 'azure_openai' && (
  &lt;&gt;
    &lt;Input label="Endpoint *" required /&gt;
    &lt;Input label="API Version *" required /&gt;
    &lt;Input label="Deployment Name" /&gt;
  &lt;/&gt;
)}

{editingProvider.provider_type === 'openai' && (
  &lt;Input label="Organization ID" /&gt;
)}

// Anthropic ã¨ Gemini ã¯å…±é€šãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ã¿</code></pre>
        </section>

        <!-- AIã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å®Ÿè£…è©³ç´° -->
        <section class="section">
            <h2><span class="emoji">âš¡</span>AIã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å®Ÿè£…è©³ç´°</h2>

            <h3>1. å®Ÿè£…æ¦‚è¦</h3>
            <p>AIå¿œç­”ã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è¡¨ç¤ºã‚’å®Ÿç¾ã™ã‚‹ãŸã‚ã€Server-Sent Events (SSE) ã‚’ä½¿ç”¨ã—ãŸã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°æ©Ÿèƒ½ã‚’å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚</p>

            <div class="info-box">
                <strong>ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ã®åˆ©ç‚¹:</strong>
                <ul>
                    <li>å¿œç­”ã®å¾…ã¡æ™‚é–“ã«ã‚ˆã‚‹ã‚¹ãƒˆãƒ¬ã‚¹è»½æ¸›</li>
                    <li>ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã«ã‚ˆã‚‹UXå‘ä¸Š</li>
                    <li>é•·ã„å¿œç­”ã§ã‚‚é€²æ—ãŒå¯è¦–åŒ–ã•ã‚Œã‚‹</li>
                    <li>å¿œç­”ç”Ÿæˆä¸­ã®ã‚­ãƒ£ãƒ³ã‚»ãƒ«æ©Ÿèƒ½å®Ÿè£…ãŒå®¹æ˜“</li>
                </ul>
            </div>

            <h3>2. ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£</h3>
            <div class="architecture-diagram">
<pre>
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Frontend (React + Fetch API)                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  executeAITest()                                  â”‚  â”‚
â”‚  â”‚  1. fetch() ã§ POST ãƒªã‚¯ã‚¨ã‚¹ãƒˆ                   â”‚  â”‚
â”‚  â”‚  2. response.body.getReader() ã§ã‚¹ãƒˆãƒªãƒ¼ãƒ å–å¾—   â”‚  â”‚
â”‚  â”‚  3. TextDecoder ã§ãƒ‡ã‚³ãƒ¼ãƒ‰                       â”‚  â”‚
â”‚  â”‚  4. 'data: ' ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã‚’ãƒ‘ãƒ¼ã‚¹              â”‚  â”‚
â”‚  â”‚  5. JSON.parse() ã§ãƒ‡ãƒ¼ã‚¿æŠ½å‡º                    â”‚  â”‚
â”‚  â”‚  6. setTestResponse() ã§çŠ¶æ…‹æ›´æ–° â†’ UIå†æç”»     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚ HTTP/1.1
                            â”‚ Content-Type: text/event-stream
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Backend (Django StreamingHttpResponse)         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  test_prompt() ã‚¢ã‚¯ã‚·ãƒ§ãƒ³                         â”‚  â”‚
â”‚  â”‚  1. StreamingHttpResponse ç”Ÿæˆ                   â”‚  â”‚
â”‚  â”‚  2. stream_response() ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼å®Ÿè¡Œ         â”‚  â”‚
â”‚  â”‚  3. _call_ai_api_stream() ã‹ã‚‰ chunk ã‚’å—ä¿¡     â”‚  â”‚
â”‚  â”‚  4. å„æ–‡å­—ã‚’å€‹åˆ¥ã« SSE å½¢å¼ã§ yield              â”‚  â”‚
â”‚  â”‚  5. å®Œäº†ã‚·ã‚°ãƒŠãƒ«é€ä¿¡                             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  _call_ai_api_stream() - ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼çµ±åˆ        â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚ Azure OpenAI: stream=True ã§ chunk å–å¾—   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ client.chat.completions.create(stream=True)â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚ OpenAI: stream=True ã§ chunk å–å¾—         â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ client.chat.completions.create(stream=True)â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚ Anthropic: messages.stream() ã§å–å¾—       â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ with client.messages.stream() as stream:  â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚ Google Gemini: stream=True ã§ chunk å–å¾—  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ model.generate_content(stream=True)       â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</pre>
            </div>

            <h3>3. ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å®Ÿè£… (Django)</h3>

            <h4>3.1 test_prompt ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ</h4>
            <pre><code class="language-python"># musubisuite_back/ai_settings/views.py

@action(detail=True, methods=['post'])
def test_prompt(self, request, pk=None):
    """AIãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ†ã‚¹ãƒˆï¼ˆã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å¯¾å¿œï¼‰"""
    provider = self.get_object()
    prompt = request.data.get('prompt', '')
    
    if not prompt:
        return Response(
            {'success': False, 'error': 'ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãŒæŒ‡å®šã•ã‚Œã¦ã„ã¾ã›ã‚“'},
            status=status.HTTP_400_BAD_REQUEST
        )
    
    try:
        from django.http import StreamingHttpResponse
        import json
        
        def stream_response():
            """AIãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°"""
            try:
                chunk_count = 0
                # å„æ–‡å­—ã‚’å€‹åˆ¥ã«é€ä¿¡ã—ã¦ãƒãƒƒãƒ•ã‚¡ãƒªãƒ³ã‚°ã‚’å›é¿
                for chunk in self._call_ai_api_stream(provider, prompt):
                    chunk_count += 1
                    # ãƒãƒ£ãƒ³ã‚¯ã‚’æ–‡å­—å˜ä½ã§åˆ†å‰²ã—ã¦é€ä¿¡
                    for char in chunk:
                        sse_data = f"data: {json.dumps({'chunk': char, 'done': False}, ensure_ascii=False)}\n\n"
                        yield sse_data.encode('utf-8')
                    logger.debug(f"Sent chunk #{chunk_count}: {chunk[:30]}...")
                # å®Œäº†ã‚·ã‚°ãƒŠãƒ«
                logger.info(f"Stream completed. Total chunks: {chunk_count}")
                yield f"data: {json.dumps({'done': True})}\n\n".encode('utf-8')
            except Exception as e:
                error_msg = f"{type(e).__name__}: {str(e)}"
                logger.error(f"Streaming error: {error_msg}", exc_info=True)
                yield f"data: {json.dumps({'error': error_msg, 'done': True})}\n\n".encode('utf-8')
        
        response = StreamingHttpResponse(
            streaming_content=stream_response(),
            content_type='text/event-stream; charset=utf-8'
        )
        response['Cache-Control'] = 'no-cache, no-transform'
        response['X-Accel-Buffering'] = 'no'
        response['Access-Control-Allow-Origin'] = '*'
        return response
        
    except Exception as e:
        logger.error(f"AI APIå‘¼ã³å‡ºã—ã‚¨ãƒ©ãƒ¼: {str(e)}", exc_info=True)
        return Response(
            {'success': False, 'error': str(e)},
            status=status.HTTP_500_INTERNAL_SERVER_ERROR
        )</code></pre>

            <h4>3.2 ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼åˆ¥ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å®Ÿè£…</h4>
            <pre><code class="language-python">def _call_ai_api_stream(self, provider, prompt):
    """ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚¿ã‚¤ãƒ—ã«å¿œã˜ã¦AI APIã‚’ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å‘¼ã³å‡ºã—"""
    api_key = provider.get_api_key()
    
    if provider.provider_type == 'azure_openai':
        # Azure OpenAI
        from openai import AzureOpenAI
        client = AzureOpenAI(
            api_key=api_key,
            api_version=provider.api_version,
            azure_endpoint=provider.endpoint
        )
        stream = client.chat.completions.create(
            model=provider.deployment_name or provider.model_name,
            messages=[{"role": "user", "content": prompt}],
            max_tokens=provider.max_tokens,
            temperature=provider.temperature,
            timeout=50.0,
            stream=True  # ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°æœ‰åŠ¹åŒ–
        )
        for chunk in stream:
            if chunk.choices[0].delta.content:
                yield chunk.choices[0].delta.content
    
    elif provider.provider_type == 'openai':
        # OpenAI
        from openai import OpenAI
        client = OpenAI(
            api_key=api_key,
            organization=provider.organization_id if provider.organization_id else None
        )
        stream = client.chat.completions.create(
            model=provider.model_name,
            messages=[{"role": "user", "content": prompt}],
            max_tokens=provider.max_tokens,
            temperature=provider.temperature,
            timeout=50.0,
            stream=True  # ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°æœ‰åŠ¹åŒ–
        )
        for chunk in stream:
            if chunk.choices[0].delta.content:
                yield chunk.choices[0].delta.content
    
    elif provider.provider_type == 'anthropic':
        # Anthropic Claude
        import anthropic
        client = anthropic.Anthropic(api_key=api_key)
        with client.messages.stream(
            model=provider.model_name,
            max_tokens=provider.max_tokens,
            temperature=provider.temperature,
            timeout=50.0,
            messages=[{"role": "user", "content": prompt}]
        ) as stream:
            for text in stream.text_stream:
                yield text
    
    elif provider.provider_type == 'google':
        # Google Gemini
        import google.generativeai as genai
        genai.configure(api_key=api_key)
        model = genai.GenerativeModel(provider.model_name)
        
        generation_config = genai.types.GenerationConfig(
            max_output_tokens=provider.max_tokens,
            temperature=provider.temperature,
        )
        
        response = model.generate_content(
            prompt,
            generation_config=generation_config,
            stream=True  # ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°æœ‰åŠ¹åŒ–
        )
        
        for chunk in response:
            if chunk.candidates:
                candidate = chunk.candidates[0]
                if candidate.content and candidate.content.parts:
                    for part in candidate.content.parts:
                        if part.text:
                            yield part.text</code></pre>

            <h3>4. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£… (React + TypeScript)</h3>

            <h4>4.1 executeAITest é–¢æ•°</h4>
            <pre><code class="language-typescript">// musubisuite/src/pages/settings/ai-settings.tsx

const executeAITest = async () => {
  if (!testingProvider || !testPrompt.trim()) {
    toast.error('ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
    return;
  }

  setTestLoading(true);
  setTestResponse('');
  
  try {
    // Server-Sent Eventsã§ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å—ä¿¡
    const response = await fetch(
      `http://127.0.0.1:8000/api/ai-providers/${testingProvider.id}/test_prompt/`,
      {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({ prompt: testPrompt }),
      }
    );

    if (!response.ok) {
      const errorData = await response.json();
      throw new Error(errorData.error || 'æ¥ç¶šã«å¤±æ•—ã—ã¾ã—ãŸ');
    }

    const reader = response.body?.getReader();
    const decoder = new TextDecoder('utf-8');
    let accumulatedText = '';
    let buffer = '';

    if (reader) {
      console.log('Starting SSE stream reading...');
      while (true) {
        const { done, value } = await reader.read();
        
        if (done) {
          console.log('Stream reading completed');
          break;
        }

        const chunk = decoder.decode(value, { stream: true });
        console.log('Received raw chunk:', chunk);
        buffer += chunk;
        
        // æ”¹è¡Œã§åˆ†å‰²ã—ã¦å„è¡Œã‚’å‡¦ç†
        const lines = buffer.split('\n');
        // æœ€å¾Œã®è¡Œã¯ä¸å®Œå…¨ãªå¯èƒ½æ€§ãŒã‚ã‚‹ã®ã§ä¿æŒ
        buffer = lines.pop() || '';

        for (const line of lines) {
          const trimmedLine = line.trim();
          if (trimmedLine.startsWith('data: ')) {
            try {
              const jsonStr = trimmedLine.slice(6);
              const data = JSON.parse(jsonStr);
              
              if (data.error) {
                setTestResponse(`âŒ ã‚¨ãƒ©ãƒ¼: ${data.error}`);
                toast.error('AIæ¥ç¶šãƒ†ã‚¹ãƒˆå¤±æ•—: ' + data.error);
                setTestLoading(false);
                return;
              }
              
              if (data.chunk) {
                accumulatedText += data.chunk;
                setTestResponse(accumulatedText);  // ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°
              }
              
              if (data.done) {
                toast.success('AIæ¥ç¶šãƒ†ã‚¹ãƒˆæˆåŠŸ');
                setTestLoading(false);
                return;
              }
            } catch (parseError) {
              console.error('Error parsing SSE data:', parseError);
            }
          }
        }
      }
    }
  } catch (error: any) {
    console.error('Error testing AI connection:', error);
    setTestResponse(`âŒ ã‚¨ãƒ©ãƒ¼: ${error.message}`);
    toast.error('AIæ¥ç¶šãƒ†ã‚¹ãƒˆå¤±æ•—: ' + error.message);
  } finally {
    setTestLoading(false);
  }
};</code></pre>

            <h4>4.2 UIå®Ÿè£… - ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å¯¾å¿œãƒ¬ã‚¹ãƒãƒ³ã‚¹è¡¨ç¤º</h4>
            <pre><code class="language-tsx">&lt;div className="space-y-2"&gt;
  &lt;Label&gt;AIå¿œç­”&lt;/Label&gt;
  &lt;div className="p-4 bg-muted rounded-md min-h-[150px] whitespace-pre-wrap border-2 border-border"&gt;
    {testLoading && !testResponse && (
      &lt;div className="flex items-center gap-2 text-muted-foreground"&gt;
        &lt;Loader2 className="h-4 w-4 animate-spin" /&gt;
        AIãŒå¿œç­”ã‚’ç”Ÿæˆã—ã¦ã„ã¾ã™...
      &lt;/div&gt;
    )}
    {testResponse && (
      &lt;div className="text-foreground"&gt;
        {testResponse}
        {/* ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ä¸­ã¯ã‚«ãƒ¼ã‚½ãƒ«è¡¨ç¤º */}
        {testLoading && &lt;span className="inline-block w-2 h-4 ml-1 bg-primary animate-pulse"&gt;|&lt;/span&gt;}
      &lt;/div&gt;
    )}
    {!testLoading && !testResponse && (
      &lt;div className="text-muted-foreground italic"&gt;
        ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€AIã®å¿œç­”ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™
      &lt;/div&gt;
    )}
  &lt;/div&gt;
&lt;/div&gt;</code></pre>

            <h3>5. ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼</h3>
            <div class="workflow-box">
                <ol>
                    <li><strong>ãƒ¦ãƒ¼ã‚¶ãƒ¼:</strong> ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå…¥åŠ› â†’ ã€Œãƒ†ã‚¹ãƒˆå®Ÿè¡Œã€ã‚¯ãƒªãƒƒã‚¯</li>
                    <li><strong>Frontend:</strong> fetch() ã§ POST ãƒªã‚¯ã‚¨ã‚¹ãƒˆé€ä¿¡</li>
                    <li><strong>Backend:</strong> StreamingHttpResponse ã‚’è¿”å´é–‹å§‹</li>
                    <li><strong>Backend:</strong> AI SDK ã‹ã‚‰ãƒãƒ£ãƒ³ã‚¯ã‚’å—ä¿¡ (ä¾‹: "ã“ã‚“ã«ã¡ã¯")</li>
                    <li><strong>Backend:</strong> ãƒãƒ£ãƒ³ã‚¯ã‚’æ–‡å­—åˆ†å‰²: "ã“", "ã‚“", "ã«", "ã¡", "ã¯"</li>
                    <li><strong>Backend:</strong> å„æ–‡å­—ã‚’ SSE å½¢å¼ã§é€ä¿¡:
                        <pre>data: {"chunk":"ã“","done":false}

data: {"chunk":"ã‚“","done":false}

data: {"chunk":"ã«","done":false}
...</pre>
                    </li>
                    <li><strong>Frontend:</strong> ReadableStream ã‹ã‚‰ chunk å—ä¿¡</li>
                    <li><strong>Frontend:</strong> TextDecoder ã§ãƒ‡ã‚³ãƒ¼ãƒ‰</li>
                    <li><strong>Frontend:</strong> "data: " ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã‚’ãƒ‘ãƒ¼ã‚¹</li>
                    <li><strong>Frontend:</strong> JSON.parse() ã§ãƒ‡ãƒ¼ã‚¿æŠ½å‡º</li>
                    <li><strong>Frontend:</strong> accumulatedText ã«è¿½åŠ : "ã“" â†’ "ã“ã‚“" â†’ "ã“ã‚“ã«" â†’ ...</li>
                    <li><strong>Frontend:</strong> setTestResponse() ã§ React çŠ¶æ…‹æ›´æ–° â†’ UIå†æç”»</li>
                    <li><strong>ãƒ¦ãƒ¼ã‚¶ãƒ¼:</strong> ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§æ–‡å­—ãŒè¿½åŠ ã•ã‚Œã‚‹ã®ã‚’ç¢ºèª</li>
                    <li><strong>Backend:</strong> å®Œäº†ã‚·ã‚°ãƒŠãƒ«é€ä¿¡: <code>data: {"done":true}</code></li>
                    <li><strong>Frontend:</strong> done=true å—ä¿¡ â†’ ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çµ‚äº†</li>
                </ol>
            </div>

            <h3>6. æŠ€è¡“çš„è€ƒæ…®äº‹é …</h3>

            <h4>6.1 ãƒãƒƒãƒ•ã‚¡ãƒªãƒ³ã‚°å•é¡Œ</h4>
            <div class="highlight">
                <p><strong>å•é¡Œ:</strong> Djangoé–‹ç™ºã‚µãƒ¼ãƒãƒ¼ (runserver) ã‚„ WSGI ã‚µãƒ¼ãƒãƒ¼ãŒãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’ãƒãƒƒãƒ•ã‚¡ãƒªãƒ³ã‚°ã—ã€ä¸€æ‹¬é€ä¿¡ã•ã‚Œã‚‹</p>
                <p><strong>å¯¾ç­–:</strong></p>
                <ul>
                    <li>å„ãƒãƒ£ãƒ³ã‚¯ã‚’æ–‡å­—å˜ä½ã«åˆ†å‰²ã—ã¦ yield (æ–‡å­—æ•°ã‚’å¢—ã‚„ã—ã¦ãƒãƒƒãƒ•ã‚¡ã‚µã‚¤ã‚ºã‚’è¶…ãˆã‚‹)</li>
                    <li><code>X-Accel-Buffering: no</code> ãƒ˜ãƒƒãƒ€ãƒ¼ã‚’è¨­å®š (Nginx ç’°å¢ƒ)</li>
                    <li><code>Cache-Control: no-cache, no-transform</code> ã§ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç„¡åŠ¹åŒ–</li>
                    <li>UTF-8 ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚’æ˜ç¤ºçš„ã«æŒ‡å®š</li>
                </ul>
            </div>

            <h4>6.2 ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°</h4>
            <pre><code class="language-python"># ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰: ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ä¸­ã®ã‚¨ãƒ©ãƒ¼
try:
    for chunk in self._call_ai_api_stream(provider, prompt):
        yield chunk
except Exception as e:
    error_msg = f"{type(e).__name__}: {str(e)}"
    yield f"data: {json.dumps({'error': error_msg, 'done': True})}\n\n".encode('utf-8')</code></pre>

            <pre><code class="language-typescript">// ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰: ãƒ‘ãƒ¼ã‚¹ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
try {
  const data = JSON.parse(jsonStr);
  if (data.error) {
    setTestResponse(`âŒ ã‚¨ãƒ©ãƒ¼: ${data.error}`);
    setTestLoading(false);
    return;
  }
} catch (parseError) {
  console.error('Error parsing SSE data:', parseError);
  // ãƒ‘ãƒ¼ã‚¹ã‚¨ãƒ©ãƒ¼ã¯ç„¡è¦–ã—ã¦ç¶šè¡Œ
}</code></pre>

            <h4>6.3 ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆè¨­å®š</h4>
            <ul>
                <li><strong>Backend AI SDK:</strong> 50ç§’ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ (<code>timeout=50.0</code>)</li>
                <li><strong>Frontend Fetch:</strong> ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼ˆãƒ–ãƒ©ã‚¦ã‚¶ä¾å­˜ã€é€šå¸¸æ•°åˆ†ï¼‰</li>
                <li><strong>Django WSGI:</strong> ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ30ç§’ï¼ˆå¿…è¦ã«å¿œã˜ã¦å»¶é•·ï¼‰</li>
            </ul>

            <h4>6.4 HTTPãƒ˜ãƒƒãƒ€ãƒ¼è¨­å®š</h4>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>ãƒ˜ãƒƒãƒ€ãƒ¼å</th>
                            <th>å€¤</th>
                            <th>ç›®çš„</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>Content-Type</code></td>
                            <td><code>text/event-stream; charset=utf-8</code></td>
                            <td>SSEå½¢å¼ã§ã‚ã‚‹ã“ã¨ã‚’æ˜ç¤º</td>
                        </tr>
                        <tr>
                            <td><code>Cache-Control</code></td>
                            <td><code>no-cache, no-transform</code></td>
                            <td>ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç„¡åŠ¹åŒ–</td>
                        </tr>
                        <tr>
                            <td><code>X-Accel-Buffering</code></td>
                            <td><code>no</code></td>
                            <td>Nginxãƒãƒƒãƒ•ã‚¡ãƒªãƒ³ã‚°ç„¡åŠ¹åŒ–</td>
                        </tr>
                        <tr>
                            <td><code>Access-Control-Allow-Origin</code></td>
                            <td><code>*</code></td>
                            <td>CORSå¯¾å¿œ</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <h3>7. ãƒ‡ãƒãƒƒã‚°æ–¹æ³•</h3>

            <h4>ãƒ–ãƒ©ã‚¦ã‚¶é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«</h4>
            <ol>
                <li><strong>ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¿ãƒ–:</strong> test_prompt ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ç¢ºèª
                    <ul>
                        <li>Response Type ãŒ <code>text/event-stream</code> ã«ãªã£ã¦ã„ã‚‹ã‹</li>
                        <li>Response ãŒå¾ã€…ã«å¢—ãˆã¦ã„ãã‹ï¼ˆã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ä¸­ï¼‰</li>
                    </ul>
                </li>
                <li><strong>ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‚¿ãƒ–:</strong> ãƒ­ã‚°ã‚’ç¢ºèª
                    <ul>
                        <li>"Starting SSE stream reading..."</li>
                        <li>"Received raw chunk: ..."</li>
                        <li>"Parsed SSE data: ..."</li>
                        <li>"Updated response, length: ..."</li>
                    </ul>
                </li>
            </ol>

            <h4>Djangoãƒ­ã‚°</h4>
            <pre><code># Djangoã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ç¢ºèª
INFO: Testing AI provider: google - DEV:gemini-2.5-pro
DEBUG: Streaming google API with model: gemini-2.5-pro
DEBUG: Using Gemini model: gemini-2.5-pro
DEBUG: Starting to iterate Gemini response stream...
DEBUG: Gemini chunk #1: ã“ã‚“ã«ã¡ã¯ï¼ç§ã¯Geminiã§ã™...
DEBUG: Sent chunk #1: ã“ã‚“ã«ã¡ã¯ï¼ç§ã¯Geminiã§ã™...
DEBUG: Gemini chunk #2: å¤§è¦æ¨¡è¨€èªãƒ¢ãƒ‡ãƒ«ã¨ã—ã¦...
DEBUG: Sent chunk #2: å¤§è¦æ¨¡è¨€èªãƒ¢ãƒ‡ãƒ«ã¨ã—ã¦...
INFO: Stream completed. Total chunks: 5</code></pre>

            <h3>8. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–</h3>

            <div class="info-box">
                <strong>æœ€é©åŒ–ãƒã‚¤ãƒ³ãƒˆ:</strong>
                <ul>
                    <li><strong>ãƒãƒ£ãƒ³ã‚¯ã‚µã‚¤ã‚º:</strong> æ–‡å­—å˜ä½ã§ã¯ãªãå˜èªå˜ä½ã«ã™ã‚‹ã“ã¨ã§ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯åŠ¹ç‡å‘ä¸Š</li>
                    <li><strong>ãƒ‡ãƒã‚¦ãƒ³ã‚¹:</strong> UIæ›´æ–°ã‚’ä¸€å®šé–“éš”ã«åˆ¶é™ï¼ˆä¾‹: 50msæ¯ï¼‰</li>
                    <li><strong>ãƒãƒƒãƒå‡¦ç†:</strong> è¤‡æ•°æ–‡å­—ã‚’ã¾ã¨ã‚ã¦é€ä¿¡ï¼ˆãƒãƒƒãƒ•ã‚¡ãƒªãƒ³ã‚°å•é¡Œã¨ãƒˆãƒ¬ãƒ¼ãƒ‰ã‚ªãƒ•ï¼‰</li>
                    <li><strong>åœ§ç¸®:</strong> gzipåœ§ç¸®ã®é©ç”¨ï¼ˆSSEã§ã¯åŠ¹æœé™å®šçš„ï¼‰</li>
                </ul>
            </div>

            <h3>9. ä»Šå¾Œã®æ”¹å–„æ¡ˆ</h3>
            <ul>
                <li>WebSocket ã¸ã®ç§»è¡Œï¼ˆåŒæ–¹å‘é€šä¿¡ãŒå¿…è¦ãªå ´åˆï¼‰</li>
                <li>ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ã‚­ãƒ£ãƒ³ã‚»ãƒ«æ©Ÿèƒ½ã®å®Ÿè£…</li>
                <li>ãƒãƒ£ãƒ³ã‚¯å˜ä½ã§ã®ã‚¨ãƒ©ãƒ¼ãƒªã‚«ãƒãƒªãƒ¼</li>
                <li>ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°é€Ÿåº¦ã®èª¿æ•´æ©Ÿèƒ½</li>
                <li>ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®ä¿å­˜ãƒ»å†ç”Ÿæ©Ÿèƒ½</li>
            </ul>
        </section>

        <!-- ä»˜éŒ² -->
        <section class="section">
            <h2><span class="emoji">ğŸ“š</span>ä»˜éŒ²</h2>

            <h3>å‚è€ƒãƒªãƒ³ã‚¯</h3>
            <ul>
                <li><a href="https://platform.openai.com/docs" target="_blank">OpenAI API Documentation</a></li>
                <li><a href="https://learn.microsoft.com/azure/ai-services/openai/" target="_blank">Azure OpenAI Service</a></li>
                <li><a href="https://docs.anthropic.com/claude/reference/getting-started-with-the-api" target="_blank">Anthropic Claude API</a></li>
                <li><a href="https://ai.google.dev/gemini-api/docs" target="_blank">Google Gemini API Documentation</a></li>
                <li><a href="https://www.microsoft.com/en-us/bing/apis/bing-web-search-api" target="_blank">Bing Search API</a></li>
                <li><a href="https://developers.google.com/custom-search" target="_blank">Google Custom Search API</a></li>
            </ul>

            <h3>AIå…±é€šåŒ–ã‚¯ã‚¤ãƒƒã‚¯ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹</h3>
            <div class="info-box">
                <h4>åŸºæœ¬çš„ãªä½¿ã„æ–¹ï¼ˆ3ã‚¹ãƒ†ãƒƒãƒ—ï¼‰</h4>
                <pre><code class="language-python"># ã‚¹ãƒ†ãƒƒãƒ—1: ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
from ai_services import get_default_ai_client

# ã‚¹ãƒ†ãƒƒãƒ—2: ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå–å¾—
client = get_default_ai_client()

# ã‚¹ãƒ†ãƒƒãƒ—3: ç”Ÿæˆå®Ÿè¡Œ
response = client.generate("ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ")
print(response)</code></pre>

                <h4>ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ç”Ÿæˆ</h4>
                <pre><code class="language-python">from ai_services import get_default_ai_client

client = get_default_ai_client()
for chunk in client.generate_stream("é•·ã„æ–‡ç« ã‚’ç”Ÿæˆã—ã¦ãã ã•ã„"):
    print(chunk, end='', flush=True)</code></pre>

                <h4>ç‰¹å®šã®ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚’æŒ‡å®š</h4>
                <pre><code class="language-python">from ai_services import get_ai_client

# IDæŒ‡å®š
client = get_ai_client(provider_id=2)

# åå‰æŒ‡å®š
client = get_ai_client(provider_name="GPT-4")

response = client.generate("ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ")</code></pre>

                <h4>ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰</h4>
                <pre><code class="language-python">client = get_default_ai_client()

# max_tokensã¨temperatureã‚’ä¸€æ™‚çš„ã«å¤‰æ›´
response = client.generate(
    "ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ",
    max_tokens=8000,
    temperature=0.3
)</code></pre>

                <h4>ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼æƒ…å ±ã®å–å¾—</h4>
                <pre><code class="language-python">client = get_default_ai_client()
info = client.info

print(f"ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼: {info['name']}")
print(f"ãƒ¢ãƒ‡ãƒ«: {info['model_name']}")
print(f"æœ€å¤§ãƒˆãƒ¼ã‚¯ãƒ³: {info['max_tokens']}")</code></pre>

                <h4>ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°</h4>
                <pre><code class="language-python">from ai_services import (
    get_default_ai_client,
    ProviderNotFoundError,
    APIKeyNotConfiguredError,
    APICallError
)

try:
    client = get_default_ai_client()
    response = client.generate("ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ")
except ProviderNotFoundError:
    print("ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“")
except APIKeyNotConfiguredError:
    print("APIã‚­ãƒ¼ãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“")
except APICallError as e:
    print(f"APIå‘¼ã³å‡ºã—ã‚¨ãƒ©ãƒ¼: {e}")</code></pre>
            </div>

            <h3>ç”¨èªé›†</h3>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>ç”¨èª</th>
                            <th>èª¬æ˜</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>AI Services</strong></td>
                            <td>å…¨ã‚·ã‚¹ãƒ†ãƒ å…±é€šã®AIæ©Ÿèƒ½ã‚’æä¾›ã™ã‚‹Pythonãƒ‘ãƒƒã‚±ãƒ¼ã‚¸</td>
                        </tr>
                        <tr>
                            <td><strong>AIClient</strong></td>
                            <td>çµ±ä¸€ã•ã‚ŒãŸAIå‘¼ã³å‡ºã—ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’æä¾›ã™ã‚‹ã‚¯ãƒ©ã‚¹</td>
                        </tr>
                        <tr>
                            <td><strong>AIProvider</strong></td>
                            <td>AIè¨­å®šã§ç®¡ç†ã•ã‚Œã‚‹ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼æƒ…å ±ï¼ˆDBä¸Šã®ãƒ¢ãƒ‡ãƒ«ï¼‰</td>
                        </tr>
                        <tr>
                            <td><strong>LLM</strong></td>
                            <td>Large Language Model - å¤§è¦æ¨¡è¨€èªãƒ¢ãƒ‡ãƒ«</td>
                        </tr>
                        <tr>
                            <td><strong>ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°</strong></td>
                            <td>AIå¿œç­”ã‚’ç”Ÿæˆã—ãªãŒã‚‰ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§è¿”å´ã™ã‚‹æ–¹å¼</td>
                        </tr>
                        <tr>
                            <td><strong>SSE</strong></td>
                            <td>Server-Sent Events - ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¸ã®ä¸€æ–¹å‘ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°</td>
                        </tr>
                        <tr>
                            <td><strong>ä¿¡é ¼åº¦ã‚¹ã‚³ã‚¢</strong></td>
                            <td>AIãŒå–å¾—ã—ãŸãƒ‡ãƒ¼ã‚¿ã®ä¿¡é ¼æ€§ã‚’0-100ã§è¡¨ã™æŒ‡æ¨™</td>
                        </tr>
                        <tr>
                            <td><strong>ã‚¨ãƒ³ãƒªãƒƒãƒãƒ¡ãƒ³ãƒˆ</strong></td>
                            <td>æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã«è¿½åŠ æƒ…å ±ã‚’ä»˜åŠ ã—ã¦ãƒ‡ãƒ¼ã‚¿ã‚’å……å®Ÿã•ã›ã‚‹ã“ã¨</td>
                        </tr>
                        <tr>
                            <td><strong>ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ</strong></td>
                            <td>LLMã«å¯¾ã™ã‚‹æŒ‡ç¤ºæ–‡</td>
                        </tr>
                        <tr>
                            <td><strong>ãƒ¬ãƒ¼ãƒˆåˆ¶é™</strong></td>
                            <td>APIå‘¼ã³å‡ºã—ã®é »åº¦åˆ¶é™</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <footer style="margin-top: 60px; padding-top: 20px; border-top: 1px solid #e5e7eb; text-align: center; color: #666;">
            <p>&copy; 2025 MusubiSuite Development Team. All rights reserved.</p>
            <p style="font-size: 0.9em;">æœ¬æ–‡æ›¸ã¯æ©Ÿå¯†æƒ…å ±ã‚’å«ã‚€ãŸã‚ã€ç¤¾å¤–ã¸ã®å…¬é–‹ã¯ç¦æ­¢ã•ã‚Œã¦ã„ã¾ã™ã€‚</p>
        </footer>
    </div>
</body>
</html>