<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æœ€é©åŒ–ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ææ¡ˆæ›¸ - Corexverse</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <style>
        :root {
            --primary-color: #2563eb;
            --secondary-color: #1e40af;
            --bg-color: #f8fafc;
            --text-color: #1e293b;
            --card-bg: #ffffff;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
        }

        body {
            font-family: 'Helvetica Neue', Arial, 'Hiragino Kaku Gothic ProN', 'Hiragino Sans', Meiryo, sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--bg-color);
            margin: 0;
            padding: 0;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 60px 0;
            margin-bottom: 40px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        h1 {
            font-size: 2.5rem;
            margin: 0 0 10px 0;
            font-weight: 700;
        }

        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .section {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s;
        }

        .section:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        h2 {
            color: var(--secondary-color);
            border-bottom: 2px solid #e2e8f0;
            padding-bottom: 10px;
            margin-top: 0;
        }

        h3 {
            color: var(--primary-color);
            margin-top: 25px;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .card {
            background: #f1f5f9;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid var(--primary-color);
        }

        .tag {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.85rem;
            font-weight: 600;
            margin-right: 5px;
            margin-bottom: 5px;
        }

        .tag.react {
            background: #e0f2fe;
            color: #0369a1;
        }

        .tag.django {
            background: #dcfce7;
            color: #15803d;
        }

        .tag.infra {
            background: #f3e8ff;
            color: #7e22ce;
        }

        .mermaid {
            background: white;
            padding: 20px;
            border-radius: 8px;
            display: flex;
            justify-content: center;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        th,
        td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #e2e8f0;
        }

        th {
            background-color: #f8fafc;
            font-weight: 600;
        }

        .status-good {
            color: var(--success);
            font-weight: bold;
        }

        .status-warn {
            color: var(--warning);
            font-weight: bold;
        }

        .status-bad {
            color: var(--danger);
            font-weight: bold;
        }

        code {
            background: #e2e8f0;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: monospace;
        }
    </style>
</head>

<body>

    <header>
        <div class="header-content">
            <h1>æœ€é©åŒ–ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ææ¡ˆæ›¸</h1>
            <div class="subtitle">Corexverse Project - Analysis & Recommendations</div>
        </div>
    </header>

    <div class="container">

        <!-- Executive Summary -->
        <div class="section">
            <h2>ğŸ“Š ã‚¨ã‚°ã‚¼ã‚¯ãƒ†ã‚£ãƒ–ã‚µãƒãƒªãƒ¼</h2>
            <p>
                ç¾åœ¨ã®ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ï¼ˆ<code>corexverse</code> ãŠã‚ˆã³ <code>corexverseAPI</code>ï¼‰ã‚’åˆ†æã—ãŸçµæœã€
                éå¸¸ã«ãƒ¢ãƒ€ãƒ³ãªæŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ï¼ˆReact 19, Vite 7, Django 5ï¼‰ãŒæ¡ç”¨ã•ã‚Œã¦ã„ã‚‹ã“ã¨ãŒç¢ºèªã§ãã¾ã—ãŸã€‚
                ã—ã‹ã—ã€é–‹ç™ºç’°å¢ƒã®çµ±ä¸€æ€§ï¼ˆDockeråŒ–ã®æ¬ å¦‚ï¼‰ã‚„ã€ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã®æœ€é©åŒ–ã€ä¸è¦ãƒ•ã‚¡ã‚¤ãƒ«ã®æ··åœ¨ãªã©ã€
                ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£ã¨ä¿å®ˆæ€§ã®è¦³ç‚¹ã§ã„ãã¤ã‹ã®æ”¹å–„ä½™åœ°ãŒã‚ã‚Šã¾ã™ã€‚
            </p>
            <p>
                æœ¬ææ¡ˆã§ã¯ã€<strong>ã€Œã‚³ãƒ³ãƒ†ãƒŠåŒ–ã«ã‚ˆã‚‹ç’°å¢ƒçµ±ä¸€ã€</strong>ã¨<strong>ã€Œæ©Ÿèƒ½ãƒ™ãƒ¼ã‚¹ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã€</strong>ã‚’è»¸ã«ã€
                é•·æœŸçš„ãªé‹ç”¨ã«è€ãˆã†ã‚‹æœ€é©ãªæ§‹æˆã‚’æç¤ºã—ã¾ã™ã€‚
            </p>
        </div>

        <!-- Current Status -->
        <div class="section">
            <h2>ğŸ” ç¾çŠ¶åˆ†æ (As-Is)</h2>
            <div class="grid">
                <div class="card">
                    <h3>Frontend (corexverse)</h3>
                    <div><span class="tag react">React 19</span> <span class="tag react">Vite 7</span> <span
                            class="tag react">TypeScript</span> <span class="tag react">Tailwind 4</span></div>
                    <ul>
                        <li>âœ… æœ€æ–°ã®Reactã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ ã‚’æ¡ç”¨</li>
                        <li>âœ… Radix UI + Tailwindã«ã‚ˆã‚‹å …ç‰¢ãªUIè¨­è¨ˆ</li>
                        <li>âœ… React Queryã«ã‚ˆã‚‹é©åˆ‡ãªãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒ</li>
                        <li>âš ï¸ Featureãƒ™ãƒ¼ã‚¹ã®æ§‹é€ ãŒæ˜ç¢ºã§ãªã„å¯èƒ½æ€§</li>
                    </ul>
                </div>
                <div class="card">
                    <h3>Backend (corexverseAPI)</h3>
                    <div><span class="tag django">Django 5.0</span> <span class="tag django">DRF 3.14</span> <span
                            class="tag django">Python 3.x</span></div>
                    <ul>
                        <li>âœ… Django REST Frameworkã«ã‚ˆã‚‹æ¨™æº–çš„ãªAPIè¨­è¨ˆ</li>
                        <li>âœ… AI SDK (OpenAI, Anthropic) ã®çµ±åˆ</li>
                        <li>âš ï¸ <code>package.json</code> ãŒèª¤ã£ã¦å«ã¾ã‚Œã¦ã„ã‚‹</li>
                        <li>âš ï¸ Dockerè¨­å®šãŒå­˜åœ¨ã—ãªã„</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Proposed Architecture -->
        <div class="section">
            <h2>ğŸš€ æ¨å¥¨ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ (To-Be)</h2>
            <p>ä»¥ä¸‹ã«ã€æ¨å¥¨ã™ã‚‹ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆå›³ã‚’ç¤ºã—ã¾ã™ã€‚Docker Composeã‚’ä¸­å¿ƒã¨ã—ã€Frontend/Backend/DBã‚’çµ±åˆç®¡ç†ã—ã¾ã™ã€‚</p>

            <h3>System Overview (Backend & Infrastructure Focus)</h3>
            <div class="mermaid">
                graph TD
                subgraph "Client Side"
                User["User / Browser"]
                PA["PowerApps Integration"]
                end

                subgraph "Docker Container Host"
                direction TB

                subgraph "Frontend Container"
                Vite["Vite Dev Server / Nginx"]
                React["React 19 App"]
                end

                subgraph "Backend Container"
                Gunicorn["Gunicorn / WSGI"]
                Django["Django REST Framework"]
                Celery["Celery Worker (Optional)"]
                end

                subgraph "Data Persistence"
                Postgres[("PostgreSQL")]
                Redis[("Redis - Cache/Queue")]
                end
                end

                subgraph "External Services"
                OpenAI["OpenAI API"]
                Anthropic["Anthropic API"]
                Dataverse["MS Dataverse"]
                end

                User -->|"HTTPS"| Vite
                PA -->|"Embed/Iframe"| Vite
                React -->|"REST API / Axios"| Gunicorn
                Django -->|"SQL"| Postgres
                Django -->|"Cache"| Redis
                Django -->|"API Call"| OpenAI
                Django -->|"API Call"| Anthropic
                Django -->|"Sync"| Dataverse
            </div>

            <h3>Frontend Architecture Detail</h3>
            <p>ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å†…éƒ¨ã®ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ã¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆæ§‹æˆã®è©³ç´°å›³ã§ã™ã€‚</p>

            <div class="mermaid">
                graph TD
                subgraph "User Interaction"
                User["User"]
                Browser["Browser / PowerApps Control"]
                end

                subgraph "Frontend Architecture (React 19 + Vite)"
                direction TB

                subgraph "Presentation Layer"
                Pages["Pages / Routes"]
                Components["UI Components (Radix UI)"]
                end

                subgraph "State & Logic Layer"
                Hooks["Custom Hooks"]
                ReactQuery["TanStack Query (Server State)"]
                FormState["React Hook Form + Zod"]
                end

                subgraph "Infrastructure Layer"
                Axios["Axios Client (Interceptors)"]
                Auth["Auth Provider"]
                end
                end

                subgraph "Backend Services"
                API["Django REST API"]
                end

                User -->|"Click/Input"| Browser
                Browser -->|"Render"| Pages
                Pages -->|"Compose"| Components
                Components -->|"Use"| Hooks
                Hooks -->|"Manage"| ReactQuery
                Hooks -->|"Validate"| FormState
                ReactQuery -->|"Fetch/Mutate"| Axios
                Axios -->|"Request (JWT)"| API
                Auth -->|"Inject Token"| Axios
            </div>
        </div>

        <!-- Directory Structure Proposal -->
        <div class="section">
            <h2>ğŸ“‚ æ¨å¥¨ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ</h2>
            <p>ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£ã‚’é«˜ã‚ã‚‹ãŸã‚ã®ã€æœ€é©ãªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ æ¡ˆã§ã™ã€‚</p>

            <div class="grid">
                <div>
                    <h3>Frontend Structure (Feature-based)</h3>
                    <pre><code>
corexverse/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ features/        <-- æ©Ÿèƒ½ã”ã¨ã«é›†ç´„
â”‚   â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”œâ”€â”€ projects/
â”‚   â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”‚   â””â”€â”€ api/
â”‚   â”‚   â””â”€â”€ ai-chat/
â”‚   â”œâ”€â”€ components/      <-- å…±é€šUIãƒ‘ãƒ¼ãƒ„
â”‚   â”‚   â”œâ”€â”€ ui/          (Buttons, Inputs)
â”‚   â”‚   â””â”€â”€ layout/
â”‚   â”œâ”€â”€ lib/             <-- è¨­å®šãƒ»ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚   â”‚   â”œâ”€â”€ axios.ts
â”‚   â”‚   â””â”€â”€ utils.ts
â”‚   â””â”€â”€ App.tsx
                    </code></pre>
                </div>
                <div>
                    <h3>Backend Structure (Service Layer)</h3>
                    <pre><code>
corexverseAPI/
â”œâ”€â”€ config/              <-- è¨­å®šé–¢é€£
â”‚   â”œâ”€â”€ settings/
â”‚   â”‚   â”œâ”€â”€ base.py
â”‚   â”‚   â”œâ”€â”€ dev.py
â”‚   â”‚   â””â”€â”€ prod.py
â”œâ”€â”€ apps/                <-- ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
â”‚   â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ projects/
â”‚   â””â”€â”€ ai_services/
â”œâ”€â”€ services/            <-- ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯å±¤
â”‚   â”œâ”€â”€ openai_service.py
â”‚   â””â”€â”€ dataverse_sync.py
â”œâ”€â”€ Dockerfile
â””â”€â”€ manage.py
                    </code></pre>
                </div>
            </div>
        </div>

        <!-- Action Plan -->
        <div class="section">
            <h2>ğŸ› ï¸ å…·ä½“çš„ãªæ”¹å–„ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒ—ãƒ©ãƒ³</h2>
            <table>
                <thead>
                    <tr>
                        <th>å„ªå…ˆåº¦</th>
                        <th>ã‚«ãƒ†ã‚´ãƒª</th>
                        <th>ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å†…å®¹</th>
                        <th>æœŸå¾…åŠ¹æœ</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="status-bad">High</td>
                        <td>Infrastructure</td>
                        <td>ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã« <code>docker-compose.yml</code> ã‚’ä½œæˆã—ã€PostgreSQLã‚’å«ã‚€é–‹ç™ºç’°å¢ƒã‚’å®šç¾©ã™ã‚‹ã€‚</td>
                        <td>ç’°å¢ƒæ§‹ç¯‰ã®è‡ªå‹•åŒ–ã€æœ¬ç•ªç’°å¢ƒã¨ã®å·®ç•°è§£æ¶ˆã€‚</td>
                    </tr>
                    <tr>
                        <td class="status-bad">High</td>
                        <td>Cleanup</td>
                        <td><code>corexverseAPI/package.json</code> ãŠã‚ˆã³ <code>node_modules</code> ã‚’å‰Šé™¤ã™ã‚‹ã€‚</td>
                        <td>ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®æ··ä¹±ã‚’é˜²ãã€‚</td>
                    </tr>
                    <tr>
                        <td class="status-warn">Medium</td>
                        <td>Backend</td>
                        <td>AIãƒ­ã‚¸ãƒƒã‚¯ã‚„Dataverseé€£æºãƒ­ã‚¸ãƒƒã‚¯ã‚’ <code>views.py</code> ã‹ã‚‰ <code>services/</code> ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¸åˆ†é›¢ã™ã‚‹ã€‚</td>
                        <td>ã‚³ãƒ¼ãƒ‰ã®å†åˆ©ç”¨æ€§å‘ä¸Šã€ãƒ†ã‚¹ãƒˆå®¹æ˜“æ€§ã®ç¢ºä¿ã€‚</td>
                    </tr>
                    <tr>
                        <td class="status-warn">Medium</td>
                        <td>Frontend</td>
                        <td><code>src/features</code> ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã—ã€æ©Ÿèƒ½å˜ä½ã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å†é…ç½®ã™ã‚‹ã€‚</td>
                        <td>ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ãŒè‚¥å¤§åŒ–ã—ãŸéš›ã®ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æ€§å‘ä¸Šã€‚</td>
                    </tr>
                    <tr>
                        <td class="status-good">Low</td>
                        <td>CI/CD</td>
                        <td>GitHub Actions (.github/workflows) ã‚’è¨­å®šã—ã€Lint/Testã‚’è‡ªå‹•åŒ–ã™ã‚‹ã€‚</td>
                        <td>å“è³ªæ‹…ä¿ã®è‡ªå‹•åŒ–ã€‚</td>
                    </tr>
                </tbody>
            </table>
        </div>

    </div>

    <script>
        mermaid.initialize({ startOnLoad: true, theme: 'neutral' });
    </script>
</body>

</html>